============================= test session starts ==============================
platform darwin -- Python 3.13.7, pytest-9.0.1, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.13/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/masa/Clients/Zach/projects/edgar
configfile: pyproject.toml
plugins: mock-3.15.1, anyio-4.11.0, timeout-2.4.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 976 items

tests/integration/test_analyze_project_threshold.py::TestConfidenceThresholdCLIFlag::test_generate_with_threshold_flag ERROR [  0%]
tests/integration/test_analyze_project_threshold.py::TestConfidenceThresholdCLIFlag::test_generate_without_threshold_flag_skips_prompt ERROR [  0%]
tests/integration/test_analyze_project_threshold.py::TestPatternFilteringIntegration::test_high_confidence_threshold_filters_patterns PASSED [  0%]
tests/integration/test_analyze_project_threshold.py::TestPatternFilteringIntegration::test_medium_confidence_threshold_filters_patterns PASSED [  0%]
tests/integration/test_analyze_project_threshold.py::TestPatternFilteringIntegration::test_low_confidence_threshold_includes_all_patterns PASSED [  0%]
tests/integration/test_analyze_project_threshold.py::TestEdgeCases::test_no_patterns_detected_skips_threshold_prompt ERROR [  0%]
tests/integration/test_analyze_project_threshold.py::TestEdgeCases::test_all_patterns_excluded_still_generates_code FAILED [  0%]
tests/integration/test_analyze_project_threshold.py::TestBackwardCompatibility::test_generate_without_threshold_still_works ERROR [  0%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_platform_import PASSED [  0%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_edgar_wrapper_import_with_warning FAILED [  1%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_csv_parsing_platform PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_csv_parsing_wrapper PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_json_parsing_platform PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_yaml_parsing_platform PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_identical_functionality PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_platform_import PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_edgar_wrapper_import_with_warning PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_http_get_platform PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_http_post_platform PASSED [  1%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_bearer_token_auth PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestAPIDataSourceMigration::test_identical_functionality PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestURLDataSourceMigration::test_platform_import PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestURLDataSourceMigration::test_edgar_wrapper_import_with_warning PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestURLDataSourceMigration::test_json_url_platform PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestURLDataSourceMigration::test_text_url_platform PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestURLDataSourceMigration::test_identical_functionality PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_platform_import PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_edgar_wrapper_import_with_warning PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_jina_api_platform PASSED [  2%]
tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_api_key_handling_platform PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_identical_functionality PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestBatch1ExportsAndPackaging::test_platform_package_exports PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestBatch1ExportsAndPackaging::test_edgar_package_exports PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestBatch1ExportsAndPackaging::test_base_class_exports PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestBatch1ExportsAndPackaging::test_edgar_base_class_deprecation PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestTypeHintsPreserved::test_file_source_type_hints PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestTypeHintsPreserved::test_api_source_type_hints PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestTypeHintsPreserved::test_url_source_type_hints PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestTypeHintsPreserved::test_jina_source_type_hints PASSED [  3%]
tests/integration/test_batch1_datasources.py::TestCorMethodsAllSources::test_file_source_core_methods PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestCorMethodsAllSources::test_api_source_core_methods PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestCorMethodsAllSources::test_url_source_core_methods PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestCorMethodsAllSources::test_jina_source_core_methods PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestNoBreakingChanges::test_file_source_api_unchanged PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestNoBreakingChanges::test_api_source_api_unchanged PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestNoBreakingChanges::test_url_source_api_unchanged PASSED [  4%]
tests/integration/test_batch1_datasources.py::TestNoBreakingChanges::test_jina_source_api_unchanged PASSED [  4%]
tests/integration/test_batch1_imports.py::test_platform_imports PASSED   [  4%]
tests/integration/test_batch1_imports.py::test_edgar_wrapper_imports PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_pattern_models_import PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_pattern_types_complete FAILED [  5%]
tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_field_types_complete FAILED [  5%]
tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_schema_analyzer_import PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_example_parser_import PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestBackwardCompatibility::test_legacy_imports_work PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestBackwardCompatibility::test_deprecation_warnings_raised FAILED [  5%]
tests/integration/test_batch2_schema_services.py::TestBackwardCompatibility::test_pattern_types_identical PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestBackwardCompatibility::test_field_types_identical PASSED [  5%]
tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_simple_field_rename_flow FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_type_conversion_flow FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_concatenation_flow FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_confidence_scores_valid FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestSchemaAnalysis::test_schema_inference_from_examples FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestSchemaAnalysis::test_schema_comparison FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestDependencyChain::test_example_parser_uses_schema_analyzer PASSED [  6%]
tests/integration/test_batch2_schema_services.py::TestDependencyChain::test_no_circular_dependencies PASSED [  6%]
tests/integration/test_batch2_schema_services.py::TestComplexPatterns::test_nested_structure_pattern FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestComplexPatterns::test_array_handling FAILED [  6%]
tests/integration/test_batch2_schema_services.py::TestEdgeCases::test_empty_examples PASSED [  7%]
tests/integration/test_batch2_schema_services.py::TestEdgeCases::test_inconsistent_schemas FAILED [  7%]
tests/integration/test_batch2_schema_services.py::TestEdgeCases::test_null_values FAILED [  7%]
tests/integration/test_batch2_schema_services.py::test_batch2_complete_integration FAILED [  7%]
tests/integration/test_code_generation.py::test_generate_weather_extractor FAILED [  7%]
tests/integration/test_code_generation.py::test_generated_code_is_valid_python FAILED [  7%]
tests/integration/test_code_generation.py::test_generated_code_has_type_hints FAILED [  7%]
tests/integration/test_code_generation.py::test_generated_code_has_docstrings FAILED [  7%]
tests/integration/test_code_generation.py::test_generated_tests_reference_examples FAILED [  7%]
tests/integration/test_code_generation.py::test_files_written_to_disk FAILED [  7%]
tests/integration/test_code_generation.py::test_minimal_examples_still_generates FAILED [  8%]
tests/integration/test_code_generation.py::test_generation_performance FAILED [  8%]
tests/integration/test_code_generation.py::test_iterative_refinement_on_validation_failure FAILED [  8%]
tests/integration/test_code_generation.py::test_max_retries_exceeded FAILED [  8%]
tests/integration/test_code_generation.py::test_validation_disabled_no_retry FAILED [  8%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_valid_weather_extractor_passes PASSED [  8%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_invalid_extractor_blocked PASSED [  8%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_warnings_do_not_block PASSED [  8%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_high_complexity_detected PASSED [  8%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_performance_under_100ms PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_batch_validation_performance PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_custom_config_enforcement PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_error_recovery PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_config_reload PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_violation_line_numbers_accurate PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestConstraintEnforcementIntegration::test_suggestion_quality PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestRealWorldScenarios::test_ai_generated_code_validation PASSED [  9%]
tests/integration/test_constraint_enforcement.py::TestRealWorldScenarios::test_iterative_code_improvement PASSED [  9%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_complete_parsing_flow PASSED [  9%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_pattern_accuracy PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_prompt_generation_from_weather_examples PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_markdown_output_quality PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_high_confidence_patterns_only PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestWeatherAPIIntegration::test_schema_differences_identified PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEdgeCasesIntegration::test_minimal_example_set PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEdgeCasesIntegration::test_complex_nested_arrays PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEdgeCasesIntegration::test_type_conversion_detection PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEdgeCasesIntegration::test_missing_field_handling PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEndToEndScenarios::test_weather_api_full_workflow PASSED [ 10%]
tests/integration/test_example_parser_integration.py::TestEndToEndScenarios::test_save_prompt_to_file PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaAuthentication::test_valid_api_key PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaAuthentication::test_missing_api_key_free_tier PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaAuthentication::test_invalid_api_key_error PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaContentExtraction::test_basic_integration PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaContentExtraction::test_content_extraction_quality PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaContentExtraction::test_markdown_format_validation PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaErrorHandling::test_invalid_url_error PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaErrorHandling::test_timeout_handling PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaErrorHandling::test_nonexistent_domain_error PASSED [ 11%]
tests/integration/test_jina_integration.py::TestJinaErrorHandling::test_validate_config_success PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaErrorHandling::test_validate_config_failure PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaNewsScraperTemplate::test_template_loads_successfully PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaNewsScraperTemplate::test_template_jina_config PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaNewsScraperTemplate::test_template_examples_format PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaNewsScraperTemplate::test_template_compatible_with_real_api PASSED [ 12%]
tests/integration/test_jina_integration.py::TestJinaCaching::test_cache_hit_performance PASSED [ 12%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPILifecycle::test_weather_api_complete_lifecycle PASSED [ 12%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPILifecycle::test_weather_api_cli_commands FAILED [ 12%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPILifecycle::test_weather_api_cli_list PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPILifecycle::test_weather_api_smoke_test PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPIExamples::test_weather_api_examples_consistency PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPIExamples::test_weather_api_examples_valid_json PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPICodeGeneration::test_weather_api_generation_with_missing_examples FAILED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPICodeGeneration::test_weather_api_generation_with_malformed_examples PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPICodeGeneration::test_weather_api_generated_code_quality PASSED [ 13%]
tests/integration/test_weather_api_e2e.py::TestWeatherAPICodeGeneration::test_weather_api_progress_tracking PASSED [ 13%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_project_path_exists PASSED [ 13%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_project_yaml_exists PASSED [ 13%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_load_weather_project PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_data_sources_configured PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_examples_loaded PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestProjectLoading::test_validation_rules_configured PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestExampleParsing::test_parse_examples PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestExampleParsing::test_field_mapping_pattern PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestExampleParsing::test_nested_extraction_pattern PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestExampleParsing::test_array_handling_pattern PASSED [ 14%]
tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_pm_mode_planning FAILED [ 14%]
tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_plan_contains_extractor_class FAILED [ 14%]
tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_plan_includes_dependencies FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_coder_mode_generation FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_extractor_has_class FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_code_implements_interface FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_tests_exist FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_constraint_validation FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_code_has_type_hints FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_code_has_docstrings FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_end_to_end_generation FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_generated_files_exist FAILED [ 15%]
tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_generated_code_quality FAILED [ 16%]
tests/integration/test_weather_project_template.py::TestWeatherProjectStructure::test_project_directory_exists PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestWeatherProjectStructure::test_required_files_exist PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestWeatherProjectStructure::test_required_directories_exist PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestWeatherProjectStructure::test_example_files_exist PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_yaml_loads_successfully PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_project_metadata PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_data_source_configuration PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_caching_configuration PASSED [ 16%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_rate_limiting_configuration PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_examples_provided PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_validation_rules PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestProjectYAML::test_output_configuration PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleFiles::test_all_examples_are_valid_json PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleFiles::test_examples_have_required_structure PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleFiles::test_input_structure_matches_api PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleFiles::test_output_structure_is_consistent PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleFiles::test_output_field_types PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_temperature_range_coverage PASSED [ 17%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_negative_temperature_coverage PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_high_temperature_coverage PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_humidity_range_coverage PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_weather_condition_diversity PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestExampleDiversity::test_example_count PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestValidationRules::test_temperature_constraints PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestValidationRules::test_humidity_constraints PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestValidationRules::test_pressure_constraints PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestDocumentation::test_readme_exists_and_not_empty PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestDocumentation::test_readme_has_required_sections PASSED [ 18%]
tests/integration/test_weather_project_template.py::TestDocumentation::test_env_example_has_api_key PASSED [ 19%]
tests/integration/test_weather_project_template.py::TestProjectReadiness::test_comprehensive_validation_passes PASSED [ 19%]
tests/integration/test_weather_project_template.py::TestProjectReadiness::test_examples_match_validation_rules PASSED [ 19%]
tests/integration/test_weather_project_template.py::TestProjectReadiness::test_ready_for_code_generation PASSED [ 19%]
tests/test_50_companies.py::test_50_companies FAILED                     [ 19%]
tests/test_centralized_openrouter.py::test_openrouter_service FAILED     [ 19%]
tests/test_centralized_openrouter.py::test_llm_service_integration FAILED [ 19%]
tests/test_centralized_openrouter.py::test_model_independence FAILED     [ 19%]
tests/test_cli_chatbot.py::test_cli_chatbot FAILED                       [ 19%]
tests/test_cli_with_fallback.py::test_cli_with_fallback FAILED           [ 19%]
tests/test_compaction_metrics.py::test_compaction_metrics FAILED         [ 20%]
tests/test_compaction_metrics.py::test_multiple_compactions FAILED       [ 20%]
tests/test_context_preservation.py::test_early_context_preserved FAILED  [ 20%]
tests/test_context_preservation.py::test_summary_accumulation FAILED     [ 20%]
tests/test_context_preservation.py::test_named_entity_recall FAILED      [ 20%]
tests/test_edgar_api.py::test_edgar_api PASSED                           [ 20%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_project_structure PASSED [ 20%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_project_configuration PASSED [ 20%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_example_format PASSED [ 20%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_excel_data_source_integration FAILED [ 21%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_transformation_coverage PASSED [ 21%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_boolean_conversion_consistency PASSED [ 21%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_data_quality FAILED [ 21%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_example_matches_source_data FAILED [ 21%]
tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_pattern_compliance PASSED [ 21%]
tests/test_enhanced_validation.py::test_validation_with_sample_data FAILED [ 21%]
tests/test_error_handling.py::test_no_tiktoken_fallback FAILED           [ 21%]
tests/test_error_handling.py::test_llm_failure_handling FAILED           [ 21%]
tests/test_error_handling.py::test_empty_conversation_compaction FAILED  [ 21%]
tests/test_error_handling.py::test_malformed_summary_response FAILED     [ 22%]
tests/test_error_handling.py::test_very_long_exchange FAILED             [ 22%]
tests/test_error_handling.py::test_rapid_compaction_cycles FAILED        [ 22%]
tests/test_error_handling.py::test_edge_case_token_counts FAILED         [ 22%]
tests/test_error_handling.py::test_concurrent_access FAILED              [ 22%]
tests/test_fmp_integration.py::test_fmp_api_integration FAILED           [ 22%]
tests/test_grok_qa_capabilities.py::test_grok_qa_capabilities FAILED     [ 22%]
tests/test_invoice_poc.py::TestInvoicePOC::test_project_structure PASSED [ 22%]
tests/test_invoice_poc.py::TestInvoicePOC::test_project_configuration PASSED [ 22%]
tests/test_invoice_poc.py::TestInvoicePOC::test_example_format PASSED    [ 22%]
tests/test_invoice_poc.py::TestInvoicePOC::test_pdf_data_source_integration PASSED [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_type_inference PASSED    [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_transformation_coverage PASSED [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_transformation_consistency PASSED [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_data_quality PASSED      [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_example_matches_source_data PASSED [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_pattern_compliance PASSED [ 23%]
tests/test_invoice_poc.py::TestInvoicePOC::test_end_to_end_poc_validation PASSED [ 23%]
tests/test_llm_direct.py::test_llm_direct FAILED                         [ 23%]
tests/test_llm_extraction.py::test_llm_extraction FAILED                 [ 23%]
tests/test_one_shot_query.py::test_one_shot_query PASSED                 [ 24%]
tests/test_one_shot_query.py::test_session_continuation PASSED           [ 24%]
tests/test_one_shot_query.py::test_silent_mode PASSED                    [ 24%]
tests/test_one_shot_query.py::test_no_loop_entered PASSED                [ 24%]
tests/test_one_shot_query.py::test_multiple_sequential_queries PASSED    [ 24%]
tests/test_one_shot_query.py::test_self_awareness_initialization PASSED  [ 24%]
tests/test_one_shot_query.py::test_query_return_value PASSED             [ 24%]
tests/test_performance.py::test_compaction_performance FAILED            [ 24%]
tests/test_performance.py::test_token_counting_performance FAILED        [ 24%]
tests/test_performance.py::test_memory_overhead FAILED                   [ 25%]
tests/test_performance.py::test_large_conversation_performance FAILED    [ 25%]
tests/test_performance.py::test_summarizer_performance FAILED            [ 25%]
tests/test_proxy_extraction.py::test_proxy_extraction FAILED             [ 25%]
tests/test_real_compensation_apis.py::test_financial_modeling_prep_api PASSED [ 25%]
tests/test_real_compensation_apis.py::test_sec_edgar_direct_access PASSED [ 25%]
tests/test_real_compensation_apis.py::test_alternative_data_sources PASSED [ 25%]
tests/test_reusable_library.py::test_reusable_library FAILED             [ 25%]
tests/test_self_improving_pattern.py::test_self_improving_pattern FAILED [ 25%]
tests/test_setup_integration.py::test_setup_command_registered PASSED    [ 25%]
tests/test_skip_decorator.py::TestSkipDecoratorVerification::test_decorator_skips_without_api_key PASSED [ 26%]
tests/test_skip_decorator.py::TestSkipDecoratorVerification::test_decorator_skips_with_marker PASSED [ 26%]
tests/test_submissions_api.py::test_submissions_api PASSED               [ 26%]
tests/test_subprocess_monitoring.py::test_subprocess_monitoring FAILED   [ 26%]
tests/test_web_search_integration.py::test_llm_service_web_search FAILED [ 26%]
tests/test_web_search_integration.py::test_supervisor_web_search FAILED  [ 26%]
tests/test_web_search_integration.py::test_engineer_web_search FAILED    [ 26%]
tests/test_web_search_integration.py::test_controller_web_search FAILED  [ 26%]
tests/test_web_search_structure.py::test_llm_service_structure PASSED    [ 26%]
tests/test_web_search_structure.py::test_supervisor_structure PASSED     [ 26%]
tests/test_web_search_structure.py::test_engineer_structure PASSED       [ 27%]
tests/test_web_search_structure.py::test_controller_structure PASSED     [ 27%]
tests/test_xbrl_executive_compensation.py::test_edgartools_installation FAILED [ 27%]
tests/test_xbrl_executive_compensation.py::test_xbrl_proxy_extraction FAILED [ 27%]
tests/test_xbrl_executive_compensation.py::test_enhanced_edgar_extraction FAILED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_init_default_prompts_dir PASSED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_init_custom_prompts_dir PASSED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_load_template_success PASSED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_load_template_not_found PASSED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_render_pm_prompt PASSED [ 27%]
tests/unit/agents/test_sonnet45_agent.py::TestPromptLoader::test_render_coder_prompt PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_init_with_api_key PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_init_from_env PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_init_custom_model PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_init_custom_temperatures PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_success PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_invalid_json PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_missing_required_fields PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_code_success PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_code_with_examples PASSED [ 28%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_code_parsing_fallback PASSED [ 29%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_code_insufficient_blocks PASSED [ 29%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_and_code_success PASSED [ 29%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_and_code_pm_failure PASSED [ 29%]
tests/unit/agents/test_sonnet45_agent.py::TestSonnet45Agent::test_plan_and_code_coder_failure PASSED [ 29%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_preset_selection_conservative PASSED [ 29%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_preset_selection_balanced PASSED [ 29%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_preset_selection_aggressive PASSED [ 29%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_default_preset_balanced PASSED [ 29%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_valid PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_boundary_low PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_boundary_high PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_invalid_then_valid PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_negative_invalid PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_non_numeric_invalid PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_custom_threshold_default_used PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_pattern_summary_displayed PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_threshold_table_displayed PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_empty_patterns_handled PASSED [ 30%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_success_message_displayed PASSED [ 31%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_prompt_returns_valid_threshold_range PASSED [ 31%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_filter_service_initialized PASSED [ 31%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_filter_service_presets_used PASSED [ 31%]
tests/unit/cli/prompts/test_confidence_threshold.py::TestConfidenceThresholdPrompt::test_impact_preview_calculated PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_openrouter_success PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_openrouter_missing_key PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_openrouter_api_failure PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_jina_missing_key PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_jina_success PASSED [ 31%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_all_services FAILED [ 32%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_openrouter_only FAILED [ 32%]
tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_failure FAILED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_valid_metadata PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_name_lowercase_conversion PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_name_with_underscores PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_name_with_hyphens PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_invalid_name_with_spaces PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_invalid_name_with_special_chars PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_empty_name PASSED [ 32%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_default_timestamps PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestProjectMetadata::test_tags_list PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_no_auth PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_api_key_auth PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_bearer_token_auth PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_basic_auth PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_env_var_syntax PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestAuthConfig::test_plaintext_secret_warning PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestCacheConfig::test_default_cache_config PASSED [ 33%]
tests/unit/config/test_project_schema.py::TestCacheConfig::test_custom_cache_config PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestCacheConfig::test_negative_ttl_rejected PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestCacheConfig::test_zero_ttl_allowed PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestCacheConfig::test_very_long_ttl_allowed PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestRateLimitConfig::test_default_rate_limit PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestRateLimitConfig::test_custom_rate_limit PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestRateLimitConfig::test_zero_rate_rejected PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestRateLimitConfig::test_negative_rate_rejected PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestRateLimitConfig::test_fractional_rate_allowed PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_api_source_valid PASSED [ 34%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_api_source_missing_endpoint PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_url_source_valid PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_url_source_missing_url PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_file_source_valid PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_file_source_missing_path PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_source_with_parameters PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_source_with_headers PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_source_with_cache PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestDataSourceConfig::test_source_with_rate_limit PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestExampleConfig::test_valid_example PASSED [ 35%]
tests/unit/config/test_project_schema.py::TestExampleConfig::test_empty_input_rejected PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestExampleConfig::test_empty_output_rejected PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestExampleConfig::test_nested_structures PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestValidationConfig::test_empty_validation PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestValidationConfig::test_required_fields PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestValidationConfig::test_field_types PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestValidationConfig::test_field_constraints PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestOutputConfig::test_valid_output_config PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestOutputConfig::test_multiple_output_formats PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestOutputConfig::test_empty_formats_rejected PASSED [ 36%]
tests/unit/config/test_project_schema.py::TestOutputConfig::test_output_with_timestamp PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestOutputConfig::test_json_pretty_print PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestRuntimeConfig::test_default_runtime_config PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestRuntimeConfig::test_custom_runtime_config PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestRuntimeConfig::test_checkpoint_config PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestRuntimeConfig::test_invalid_max_workers PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestRuntimeConfig::test_negative_max_workers_rejected PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestProjectConfig::test_minimal_valid_config PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestProjectConfig::test_full_config PASSED [ 37%]
tests/unit/config/test_project_schema.py::TestProjectConfig::test_no_data_sources_rejected PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestProjectConfig::test_duplicate_source_names_rejected PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestProjectConfig::test_comprehensive_validation PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestYAMLSerialization::test_from_yaml_valid_file PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestYAMLSerialization::test_from_yaml_missing_file PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestYAMLSerialization::test_to_yaml PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestEdgeCases::test_very_long_project_name PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestEdgeCases::test_unicode_in_project_name PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestEdgeCases::test_empty_examples_list PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestEdgeCases::test_special_characters_in_paths PASSED [ 38%]
tests/unit/config/test_project_schema.py::TestEdgeCases::test_very_high_worker_count PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_init_with_auth_token PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_init_without_auth_token PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_init_with_custom_headers PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_init_with_custom_timeout PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_base_url_trailing_slash_removed PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_auth_token_adds_bearer_prefix PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_cache_enabled_by_default PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceInitialization::test_custom_cache_settings PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceFetch::test_basic_get_request PASSED [ 39%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceFetch::test_get_request_with_query_params PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceFetch::test_request_with_custom_method PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceFetch::test_endpoint_leading_slash_handled PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceFetch::test_empty_endpoint_uses_base_url PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceAuthentication::test_bearer_token_in_request_headers PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceAuthentication::test_custom_headers_in_request PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceHTTPErrors::test_404_not_found_error PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceHTTPErrors::test_500_internal_server_error PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceHTTPErrors::test_503_service_unavailable_error PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceTimeouts::test_connection_timeout PASSED [ 40%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceTimeouts::test_read_timeout PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceTimeouts::test_timeout_value_passed_to_client PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCache::test_cache_hit_no_api_call PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCache::test_cache_miss_calls_api PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCache::test_different_endpoints_different_cache_keys PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCache::test_cache_disabled_always_calls_api PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceJSONParsing::test_invalid_json_response PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceJSONParsing::test_malformed_json_response PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceValidation::test_validate_config_success_200 PASSED [ 41%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceValidation::test_validate_config_success_with_404 PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceValidation::test_validate_config_failure_500 PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceValidation::test_validate_config_failure_network_error PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceValidation::test_validate_config_failure_timeout PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_includes_base_url PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_includes_endpoint PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_includes_params PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_includes_method PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_deterministic PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_param_order_independent PASSED [ 42%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceCacheKey::test_cache_key_is_md5_hash PASSED [ 43%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceLogging::test_initialization_logging PASSED [ 43%]
tests/unit/data_sources/test_api_source.py::TestAPIDataSourceLogging::test_fetch_debug_logging PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_valid_xlsx_file PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_valid_xls_file PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_file_not_found PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_unsupported_file_type_csv PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_unsupported_file_type_txt PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_sheet_name_as_string PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_sheet_name_as_integer PASSED [ 43%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_custom_header_row PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_max_rows_parameter PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_skip_rows_parameter PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_cache_disabled_for_local_files PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_no_rate_limiting_for_local_files PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceInitialization::test_no_retries_for_local_files PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_basic_fetch PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_row_data_structure PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_column_names_extraction PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_row_count_accuracy PASSED [ 44%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_sheet_name_metadata PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_source_file_metadata PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_specific_row_values PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_read_specific_sheet_by_name PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceFetch::test_read_specific_sheet_by_index PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_integer_preservation PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_float_preservation PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_string_preservation PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_boolean_preservation PASSED [ 45%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_datetime_preservation PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_nan_converted_to_none PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceTypePreservation::test_all_none_values_in_column PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_empty_excel_file PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_single_row_header_only PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_single_column PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_single_row_with_data PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_max_rows_limit PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_missing_sheet_name PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_invalid_sheet_index PASSED [ 46%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_non_zero_header_row PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_skip_rows_after_header PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_file_deleted_after_init PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_file_is_directory_not_file PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_pandas_value_error_non_worksheet PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceEdgeCases::test_file_not_found_during_fetch PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceSchemaCompatibility::test_output_format_matches_expected_structure PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceSchemaCompatibility::test_json_serializable_output PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceSchemaCompatibility::test_no_nan_in_output PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceSchemaCompatibility::test_column_names_are_strings PASSED [ 47%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceSchemaCompatibility::test_metadata_fields_present PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_valid_file PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_missing_file PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_empty_workbook PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_pandas_not_installed PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_permission_error PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_generic_exception PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_invalid_sheet_name PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_validate_config_invalid_sheet_index PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_get_cache_key_with_string_sheet_name PASSED [ 48%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_get_cache_key_with_integer_sheet_index PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_get_cache_key_deterministic PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceConfiguration::test_get_cache_key_different_sheets PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_clean_data_replaces_nan_with_none PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_clean_data_preserves_valid_values PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_get_active_sheet_name_string PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_get_active_sheet_name_index PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_get_active_sheet_name_out_of_range_index PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_clean_data_without_pandas PASSED [ 49%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourcePrivateMethods::test_get_active_sheet_name_exception_fallback PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceErrorHandling::test_pandas_not_installed_error PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceErrorHandling::test_corrupt_excel_file_error PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceErrorHandling::test_permission_error_handling PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceErrorHandling::test_logging_on_initialization PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceErrorHandling::test_logging_on_fetch PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceIntegration::test_read_then_validate PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceIntegration::test_multiple_fetches_same_source PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceIntegration::test_different_sources_same_file PASSED [ 50%]
tests/unit/data_sources/test_excel_source.py::TestExcelDataSourceIntegration::test_complex_excel_workflow PASSED [ 50%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceInitialization::test_init_with_valid_file_path PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceInitialization::test_init_with_encoding PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceInitialization::test_init_without_cache PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceFormatParsing::test_fetch_json_format PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceFormatParsing::test_fetch_yaml_format PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceFormatParsing::test_fetch_csv_format PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceFormatParsing::test_fetch_text_format PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceFormatParsing::test_fetch_unknown_extension PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceErrorHandling::test_fetch_file_not_found PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceErrorHandling::test_fetch_path_is_directory PASSED [ 51%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceErrorHandling::test_fetch_malformed_json PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceErrorHandling::test_fetch_malformed_yaml PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceEdgeCases::test_fetch_empty_file PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceEdgeCases::test_fetch_encoding_error PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceEdgeCases::test_fetch_large_file PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_validate_config_valid PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_validate_config_missing_file_path PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_get_cache_key PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_get_cache_key_deterministic PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_validate_config_path_is_directory PASSED [ 52%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_validate_config_permission_error PASSED [ 53%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceConfiguration::test_validate_config_generic_exception PASSED [ 53%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceLogging::test_logging_on_initialization PASSED [ 53%]
tests/unit/data_sources/test_file_source.py::TestFileDataSourceLogging::test_logging_on_fetch PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_api_key PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_without_api_key PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_env_api_key PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_custom_base_url PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_trailing_slash_base_url PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_custom_timeout PASSED [ 53%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_custom_rate_limit PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_initialization_with_cache_ttl PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestJinaDataSourceInitialization::test_default_cache_ttl_is_one_hour PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_fetch_markdown_response PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_fetch_json_response PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_fetch_markdown_without_title PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_fetch_empty_content PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_jina_endpoint_construction PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestSuccessfulJinaFetches::test_extracted_at_timestamp_format PASSED [ 54%]
tests/unit/data_sources/test_jina_source.py::TestJinaAuthentication::test_fetch_with_api_key_header PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestJinaAuthentication::test_fetch_without_api_key_no_auth_header PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestJinaAuthentication::test_invalid_api_key_401_error PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_invalid_url_missing_protocol PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_invalid_url_wrong_protocol PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_valid_http_url PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_valid_https_url PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_url_with_query_parameters PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestURLValidation::test_url_with_fragment PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestHTTPErrorHandling::test_404_target_not_found PASSED [ 55%]
tests/unit/data_sources/test_jina_source.py::TestHTTPErrorHandling::test_429_rate_limit_exceeded PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestHTTPErrorHandling::test_500_jina_api_error PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestHTTPErrorHandling::test_503_service_unavailable PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestNetworkErrors::test_connection_timeout PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestNetworkErrors::test_read_timeout PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestNetworkErrors::test_connection_error PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestNetworkErrors::test_network_error PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestCacheIntegration::test_cache_hit_returns_cached_content PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestCacheIntegration::test_cache_miss_calls_api PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestCacheIntegration::test_cache_disabled_always_calls_api PASSED [ 56%]
tests/unit/data_sources/test_jina_source.py::TestCacheKeyGeneration::test_cache_key_generation PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestCacheKeyGeneration::test_cache_key_is_consistent PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestCacheKeyGeneration::test_cache_key_different_for_different_urls PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestCacheKeyGeneration::test_cache_key_is_32_chars PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestCacheKeyGeneration::test_cache_key_ignores_kwargs PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestConfigurationValidation::test_validate_config_success PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestConfigurationValidation::test_validate_config_failure_no_content PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestConfigurationValidation::test_validate_config_failure_network_error PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestConfigurationValidation::test_validate_config_failure_401_error PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestConfigurationValidation::test_validate_config_failure_timeout PASSED [ 57%]
tests/unit/data_sources/test_jina_source.py::TestMarkdownProcessing::test_title_extraction_from_h1 PASSED [ 58%]
tests/unit/data_sources/test_jina_source.py::TestMarkdownProcessing::test_title_extraction_skips_h2 PASSED [ 58%]
tests/unit/data_sources/test_jina_source.py::TestMarkdownProcessing::test_title_strips_hash_and_whitespace PASSED [ 58%]
tests/unit/data_sources/test_jina_source.py::TestMarkdownProcessing::test_large_markdown_content PASSED [ 58%]
tests/unit/data_sources/test_jina_source.py::TestTimeoutConfiguration::test_timeout_passed_to_client PASSED [ 58%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_valid_pdf_file SKIPPED [ 58%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_file_not_found PASSED [ 58%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_unsupported_file_type_docx PASSED [ 58%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_unsupported_file_type_txt PASSED [ 58%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_page_number_as_integer SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_page_number_as_all_string SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_custom_table_strategy SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_table_bbox_parameter SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_max_rows_parameter SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_skip_rows_parameter SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_cache_disabled_for_local_files SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_no_rate_limiting_for_local_files SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceInitialization::test_no_retries_for_local_files SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTableSettings::test_lines_strategy_settings SKIPPED [ 59%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTableSettings::test_text_strategy_settings SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTableSettings::test_mixed_strategy_settings SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTableSettings::test_custom_settings_override SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_basic_fetch SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_row_data_structure SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_column_names_extraction SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_row_count_accuracy SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_page_number_metadata SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_source_file_metadata SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceFetch::test_specific_row_values SKIPPED [ 60%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTypePreservation::test_integer_inference SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTypePreservation::test_float_inference SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTypePreservation::test_string_preservation SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceTypePreservation::test_whitespace_stripping SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_empty_pdf_no_tables SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_max_rows_limit SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_invalid_page_number_too_high SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_page_number_all_not_implemented SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_file_deleted_after_init SKIPPED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceEdgeCases::test_file_is_directory_not_file PASSED [ 61%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceSchemaCompatibility::test_output_format_matches_excel_structure SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceSchemaCompatibility::test_json_serializable_output SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceSchemaCompatibility::test_no_none_in_column_names SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceSchemaCompatibility::test_column_names_are_strings SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceSchemaCompatibility::test_metadata_fields_present SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_valid_file SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_missing_file SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_invalid_page_number SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_get_cache_key_with_integer_page SKIPPED [ 62%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_get_cache_key_with_all_string SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_get_cache_key_deterministic SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_not_a_file PASSED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_wrong_extension PASSED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_empty_pdf_no_pages SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_invalid_page_type SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_pdfplumber_not_installed SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_permission_error SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceConfiguration::test_validate_config_unexpected_exception SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_pdfplumber_not_installed_error SKIPPED [ 63%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_pandas_not_installed_error SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_invalid_page_number_type SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_negative_page_number SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_table_with_insufficient_data SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_runtime_error_on_pdf_parsing_failure SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_skip_rows_functionality SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_table_bbox_cropping SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_logging_on_initialization SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceErrorHandling::test_logging_on_fetch SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceIntegration::test_read_then_validate SKIPPED [ 64%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceIntegration::test_multiple_fetches_same_source SKIPPED [ 65%]
tests/unit/data_sources/test_pdf_source.py::TestPDFDataSourceIntegration::test_different_sources_same_file SKIPPED [ 65%]
tests/unit/data_sources/test_url_source.py::TestURLDataSourceInitialization::test_default_initialization PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestURLDataSourceInitialization::test_custom_timeout PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestURLDataSourceInitialization::test_cache_enabled_configuration PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestURLDataSourceInitialization::test_cache_disabled_configuration PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestURLDataSourceInitialization::test_inherits_from_base_data_source PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestSuccessfulURLFetches::test_fetch_json_success PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestSuccessfulURLFetches::test_fetch_text_success PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestSuccessfulURLFetches::test_fetch_html_success PASSED [ 65%]
tests/unit/data_sources/test_url_source.py::TestSuccessfulURLFetches::test_fetch_http_url PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestSuccessfulURLFetches::test_fetch_no_content_type_header PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestURLValidation::test_invalid_url_no_protocol PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestURLValidation::test_invalid_url_ftp_protocol PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestURLValidation::test_invalid_url_empty_string PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestURLValidation::test_invalid_url_file_protocol PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestURLValidation::test_invalid_url_malformed_protocol PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestHTTPErrorHandling::test_http_404_not_found PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestHTTPErrorHandling::test_http_500_server_error PASSED [ 66%]
tests/unit/data_sources/test_url_source.py::TestHTTPErrorHandling::test_http_403_forbidden PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestHTTPErrorHandling::test_http_503_service_unavailable PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestNetworkIssues::test_timeout_error PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestNetworkIssues::test_connect_timeout PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestNetworkIssues::test_network_error PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestJSONParsing::test_invalid_json_fallback_to_text PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestJSONParsing::test_json_with_various_content_types PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestCacheIntegration::test_cache_hit PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestCacheIntegration::test_cache_miss PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestCacheIntegration::test_cache_disabled PASSED [ 67%]
tests/unit/data_sources/test_url_source.py::TestCacheIntegration::test_cache_different_urls PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestCacheKeyGeneration::test_cache_key_generation PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestCacheKeyGeneration::test_cache_key_deterministic PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestCacheKeyGeneration::test_cache_key_different_urls PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestCacheKeyGeneration::test_cache_key_with_query_params PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestConfigurationValidation::test_validate_config_always_true PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestConfigurationValidation::test_validate_config_with_custom_timeout PASSED [ 68%]
tests/unit/data_sources/test_url_source.py::TestConfigurationValidation::test_validate_config_with_cache_disabled PASSED [ 68%]
tests/unit/services/codegen/test_code_validator.py::TestSyntaxValidation::test_validate_invalid_syntax_in_extractor PASSED [ 68%]
tests/unit/services/codegen/test_code_validator.py::TestSyntaxValidation::test_validate_invalid_syntax_in_tests PASSED [ 68%]
tests/unit/services/codegen/test_code_validator.py::TestTypeHintsValidation::test_validate_missing_type_hints PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestTypeHintsValidation::test_validate_with_type_hints PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestTestsValidation::test_validate_missing_tests PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestTestsValidation::test_validate_with_tests PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestInterfaceValidation::test_validate_missing_interface_implementation PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestInterfaceValidation::test_validate_missing_async_extract PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestMultipleFailures::test_validate_multiple_failures PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestDocstringsValidation::test_validate_missing_docstrings PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestDocstringsValidation::test_validate_with_docstrings PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestQualityScoreCalculation::test_quality_score_all_checks_pass PASSED [ 69%]
tests/unit/services/codegen/test_code_validator.py::TestQualityScoreCalculation::test_quality_score_zero_when_invalid PASSED [ 70%]
tests/unit/services/codegen/test_code_validator.py::TestQualityScoreCalculation::test_quality_score_partial_pass PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerInitialization::test_init_default_config PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerInitialization::test_init_custom_config PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerInitialization::test_get_validators_list PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerInitialization::test_get_config PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateCode::test_validate_code_success PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateCode::test_validate_code_syntax_error PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateCode::test_validate_code_multiple_violations PASSED [ 70%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateCode::test_validate_code_empty PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateCode::test_validate_code_validator_exception PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateFile::test_validate_file_success PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateFile::test_validate_file_not_found PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateFile::test_validate_file_permission_error PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateFile::test_validate_file_with_violations PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerValidateFile::test_validate_file_encoding PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerConfigManagement::test_update_config_reinitializes_validators PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerConfigManagement::test_config_affects_validation PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerConfigManagement::test_complexity_threshold_enforcement PASSED [ 71%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerConfigManagement::test_get_config_returns_current PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerEdgeCases::test_whitespace_only_code PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerEdgeCases::test_comment_only_code PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestConstraintEnforcerEdgeCases::test_very_long_code PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestValidationResultIntegration::test_validation_result_severity_counts PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestValidationResultIntegration::test_validation_result_get_violations_by_severity PASSED [ 72%]
tests/unit/services/codegen/test_constraint_enforcer.py::TestValidationResultIntegration::test_validation_result_string_representation PASSED [ 72%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeValidationError::test_includes_project_name_and_attempts PASSED [ 72%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeValidationError::test_includes_troubleshooting_suggestions PASSED [ 72%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeValidationError::test_context_stored PASSED [ 72%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeValidationError::test_multiple_issues_joined PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_auth_failure_401 PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_rate_limit_429 PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_server_error_500 PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_server_error_503 PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_generic_error PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestOpenRouterAPIError::test_context_includes_status_code PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestPlanGenerationError::test_includes_reason_and_examples_count PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestPlanGenerationError::test_includes_troubleshooting_suggestions PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestPlanGenerationError::test_context_stored PASSED [ 73%]
tests/unit/services/test_code_generator_exceptions.py::TestExampleParsingError::test_includes_file_path_and_parse_error PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestExampleParsingError::test_includes_troubleshooting_suggestions PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestExampleParsingError::test_context_stored PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestFileWriteError::test_includes_file_path_and_error PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestFileWriteError::test_includes_troubleshooting_suggestions PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestFileWriteError::test_context_stored PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeGenerationErrorBase::test_suggestions_optional PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeGenerationErrorBase::test_context_optional PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeGenerationErrorBase::test_suggestions_displayed PASSED [ 74%]
tests/unit/services/test_code_generator_exceptions.py::TestCodeGenerationErrorBase::test_context_stored PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestGenerationProgress::test_creation_with_valid_status PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestGenerationProgress::test_invalid_status_raises_error PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestGenerationProgress::test_progress_percentage_calculation PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestGenerationProgress::test_is_complete_property PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestGenerationProgress::test_is_failed_property PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestProgressCallbacks::test_progress_callback_invoked_for_all_steps PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestProgressCallbacks::test_progress_callback_not_invoked_when_none PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestRollbackMechanism::test_rollback_deletes_files_on_failure PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestOptionalSteps::test_validation_skipped_when_disabled PASSED [ 75%]
tests/unit/services/test_code_generator_progress.py::TestOptionalSteps::test_file_writing_skipped_when_disabled PASSED [ 76%]
tests/unit/services/test_code_generator_progress.py::TestDryRunMode::test_dry_run_generates_code_without_writing PASSED [ 76%]
tests/unit/services/test_code_generator_progress.py::TestDryRunMode::test_dry_run_progress_message PASSED [ 76%]
tests/unit/services/test_code_generator_progress.py::TestDryRunMode::test_dry_run_with_validation_failure_no_rollback PASSED [ 76%]
tests/unit/services/test_code_generator_progress.py::TestDryRunMode::test_dry_run_skips_file_writing_step PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_valid_code_passes PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_syntax_error_detected PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_missing_interface_detected PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_missing_inject_decorator_detected PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_missing_type_hints_detected PASSED [ 76%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_forbidden_import_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_high_complexity_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_print_statement_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_dangerous_function_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_sql_injection_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_hardcoded_credential_detected PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_severity_levels PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_config_update PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_validation_result_string_representation PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_validate_file_not_found PASSED [ 77%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_empty_code PASSED [ 78%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_method_too_long_detected PASSED [ 78%]
tests/unit/services/test_constraint_enforcer.py::TestConstraintEnforcer::test_class_too_long_detected PASSED [ 78%]
tests/unit/services/test_constraint_enforcer.py::TestValidationModels::test_violation_string_representation PASSED [ 78%]
tests/unit/services/test_constraint_enforcer.py::TestValidationModels::test_validation_result_counts PASSED [ 78%]
tests/unit/services/test_constraint_enforcer.py::TestValidationModels::test_constraint_config_from_dict PASSED [ 78%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_simple_field_mapping PASSED [ 78%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_nested_field_extraction PASSED [ 78%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_array_first_element PASSED [ 78%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_constant_value_pattern PASSED [ 78%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_type_conversion_pattern PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_empty_examples PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_multiple_patterns_same_field PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_high_confidence_patterns PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_warnings_generation PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_schema_differences_detected PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_pattern_examples_included PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_complex_nested_structure PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_null_value_handling PASSED [ 79%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_pattern_confidence_calculation PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestExampleParser::test_multiple_output_fields PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestPatternDetection::test_field_rename_detection PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestPatternDetection::test_direct_copy_pattern PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestPatternDetection::test_calculation_pattern_detection PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestEdgeCases::test_empty_input_dict PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestEdgeCases::test_empty_output_dict PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestEdgeCases::test_single_example PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestEdgeCases::test_array_with_mixed_types PASSED [ 80%]
tests/unit/services/test_example_parser.py::TestEdgeCases::test_deeply_nested_arrays PASSED [ 80%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_07_balanced PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_09_strict PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_08_conservative PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_06_aggressive PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_05_very_lenient PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_00_minimum PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_threshold_10_maximum PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_invalid_threshold_negative PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_invalid_threshold_over_one PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filter_empty_patterns PASSED [ 81%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filtered_high_confidence_patterns PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filtered_medium_confidence_patterns PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filtered_low_confidence_patterns PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_filtered_patterns_alias PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_get_threshold_presets PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_presets_thresholds_values PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_format_confidence_summary_mixed PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_format_confidence_summary_empty PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_format_confidence_summary_all_high PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_format_confidence_summary_all_low PASSED [ 82%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_warnings_for_many_excluded PASSED [ 83%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_warnings_for_field_mapping_excluded PASSED [ 83%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_warnings_for_medium_confidence_excluded PASSED [ 83%]
tests/unit/services/test_pattern_filter.py::TestPatternFilterService::test_no_warnings_when_all_included PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_create_project_success PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_create_project_with_template PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_create_project_duplicate PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_get_project_success PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_get_project_not_found PASSED [ 83%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_list_projects_empty PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_list_projects_single PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_list_projects_multiple PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_delete_project_success PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_delete_project_not_found PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestCRUDOperations::test_get_project_info_alias PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_valid PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_not_found PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_missing_config PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_invalid_yaml PASSED [ 84%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_missing_directories PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestValidation::test_validate_project_no_examples PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestValidation::test_validation_result_to_dict PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestCaching::test_cache_on_list PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestCaching::test_cache_invalidation_on_create PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestCaching::test_cache_invalidation_on_delete PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestCaching::test_cache_populated_on_get PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_default_projects_dir_in_repo PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_override PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_expanduser PASSED [ 85%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_empty_string PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_whitespace_only PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_create_project_creates_base_directory PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_load_projects_nonexistent_directory PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_invalid_project_name_empty PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_invalid_project_name_special_chars PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_valid_project_names PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_load_projects_malformed_yaml PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_load_projects_validation_error PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestErrorHandling::test_delete_project_permission_error PASSED [ 86%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_project_name_with_underscores PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_project_name_with_hyphens PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_project_name_numeric PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_very_long_project_name PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_list_projects_with_non_directory_items PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_list_projects_with_directory_without_yaml PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_project_info_to_dict PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_project_info_from_config PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_load_projects_with_file_disappearing PASSED [ 87%]
tests/unit/services/test_project_manager.py::TestEdgeCases::test_load_projects_unexpected_error PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_generate_prompt_basic PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_prompt_has_required_sections PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_to_text_output PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_to_markdown_output PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_schema_formatting PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_pattern_detail_sections PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_pattern_confidence_shown PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_pattern_examples_included PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_implementation_requirements_section PASSED [ 88%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_warnings_section_created PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_no_warnings_section_when_none PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_high_confidence_patterns_highlighted PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_implementation_guidance_provided PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_type_safety_indication PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_project_name_included PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_section_ordering PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_nested_schema_indication PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGenerator::test_array_schema_indication PASSED [ 89%]
tests/unit/services/test_prompt_generator.py::TestPromptGeneration::test_complete_weather_api_prompt PASSED [ 89%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_simple_schema_inference PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_type_inference PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_nested_structure_inference PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_array_field_detection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_nullable_field_detection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_required_field_detection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_sample_values_collection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaAnalyzer::test_nested_level_calculation PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaComparison::test_field_addition_detection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaComparison::test_field_removal_detection PASSED [ 90%]
tests/unit/services/test_schema_analyzer.py::TestSchemaComparison::test_type_change_detection PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestSchemaComparison::test_field_rename_detection PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestSchemaComparison::test_no_differences_same_schema PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_empty_examples PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_empty_dictionaries PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_inconsistent_types_across_examples PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_deeply_nested_structure PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_array_of_primitives PASSED [ 91%]
tests/unit/services/test_schema_analyzer.py::TestEdgeCases::test_mixed_nested_and_flat_fields PASSED [ 91%]
tests/unit/test_data_sources.py::TestRateLimiter::test_rate_limiter_allows_requests_within_limit PASSED [ 92%]
tests/unit/test_data_sources.py::TestRateLimiter::test_rate_limiter_blocks_when_limit_exceeded PASSED [ 92%]
tests/unit/test_data_sources.py::TestRateLimiter::test_rate_limiter_usage_tracking PASSED [ 92%]
tests/unit/test_data_sources.py::TestRateLimiter::test_rate_limiter_reset PASSED [ 92%]
tests/unit/test_data_sources.py::TestRateLimiter::test_rate_limiter_validates_positive_limit PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_initialization_with_defaults PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_initialization_with_custom_settings PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_fetch_with_cache_hit PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_fetch_with_cache_expiry PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_fetch_with_cache_disabled PASSED [ 92%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_retry_logic_success_on_first_attempt PASSED [ 93%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_retry_logic_success_on_retry PASSED [ 93%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_retry_logic_all_attempts_fail PASSED [ 93%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_clear_cache PASSED [ 93%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_get_cache_stats_empty PASSED [ 93%]
tests/unit/test_data_sources.py::TestBaseDataSource::test_get_cache_stats_with_data PASSED [ 93%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_fetch_success PASSED [ 93%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_fetch_with_auth_token PASSED [ 93%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_fetch_builds_correct_url PASSED [ 93%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_validate_config_success PASSED [ 93%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_validate_config_failure PASSED [ 94%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_get_cache_key_deterministic PASSED [ 94%]
tests/unit/test_data_sources.py::TestAPIDataSource::test_api_get_cache_key_different_params PASSED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_initialization_free_tier FAILED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_initialization_paid_tier PASSED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_markdown_response PASSED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_json_response PASSED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_invalid_url PASSED [ 94%]
tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_get_cache_key PASSED [ 94%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_initialization_disables_cache PASSED [ 94%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_fetch_json PASSED [ 95%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_fetch_yaml PASSED [ 95%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_fetch_text PASSED [ 95%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_fetch_not_found PASSED [ 95%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_validate_config_exists PASSED [ 95%]
tests/unit/test_data_sources.py::TestFileDataSource::test_file_validate_config_not_found PASSED [ 95%]
tests/unit/test_data_sources.py::TestURLDataSource::test_url_fetch_json PASSED [ 95%]
tests/unit/test_data_sources.py::TestURLDataSource::test_url_fetch_text PASSED [ 95%]
tests/unit/test_data_sources.py::TestURLDataSource::test_url_fetch_invalid_url PASSED [ 95%]
tests/unit/test_data_sources.py::TestURLDataSource::test_url_validate_config PASSED [ 96%]
tests/unit/test_data_sources.py::TestURLDataSource::test_url_get_cache_key PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectCreate::test_create_minimal_project PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectCreate::test_create_project_with_description PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectCreate::test_create_project_already_exists PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectList::test_list_empty_directory PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectList::test_list_projects_table_format PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectList::test_list_projects_json_format PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectList::test_list_projects_tree_format PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectDelete::test_delete_project_with_confirmation PASSED [ 96%]
tests/unit/test_project_command.py::TestProjectDelete::test_delete_project_cancel PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectDelete::test_delete_project_force PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectDelete::test_delete_nonexistent_project PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectDelete::test_delete_invalid_project PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectValidate::test_validate_valid_project PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectValidate::test_validate_project_with_warnings PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectValidate::test_validate_project_with_errors PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectValidate::test_validate_nonexistent_project PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectValidate::test_validate_project_verbose PASSED [ 97%]
tests/unit/test_project_command.py::TestProjectCommandGroup::test_project_help PASSED [ 97%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_non_interactive_openrouter PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_non_interactive_jina PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_non_interactive_edgar PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_interactive_mode PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_updates_existing_key PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_preserves_comments PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_adds_new_key_to_existing_file PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_invalid_key PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_edgar_user_agent_validation PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_creates_new_env_file PASSED [ 98%]
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_handles_empty_value PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupValidation::test_validate_openrouter_real PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupValidation::test_validate_jina_real PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupValidation::test_validate_openrouter_invalid_key PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupValidation::test_validate_jina_invalid_key PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupHelpers::test_read_env_file PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupHelpers::test_read_env_file_with_comments PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupHelpers::test_read_env_file_nonexistent PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupHelpers::test_save_to_env_file_new_keys PASSED [ 99%]
tests/unit/test_setup_command.py::TestSetupHelpers::test_save_to_env_file_update_existing PASSED [100%]
ERROR: Coverage failure: total of 40 is less than fail-under=80


==================================== ERRORS ====================================
_ ERROR at setup of TestConfidenceThresholdCLIFlag.test_generate_with_threshold_flag _
tests/integration/test_analyze_project_threshold.py:47: in mock_project_manager
    with patch('edgar_analyzer.cli.commands.project.Container.project_manager') as mock:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'edgar_analyzer.cli.commands.project' has no attribute 'Container'
_ ERROR at setup of TestConfidenceThresholdCLIFlag.test_generate_without_threshold_flag_skips_prompt _
tests/integration/test_analyze_project_threshold.py:47: in mock_project_manager
    with patch('edgar_analyzer.cli.commands.project.Container.project_manager') as mock:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'edgar_analyzer.cli.commands.project' has no attribute 'Container'
_ ERROR at setup of TestEdgeCases.test_no_patterns_detected_skips_threshold_prompt _
tests/integration/test_analyze_project_threshold.py:47: in mock_project_manager
    with patch('edgar_analyzer.cli.commands.project.Container.project_manager') as mock:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'edgar_analyzer.cli.commands.project' has no attribute 'Container'
_ ERROR at setup of TestBackwardCompatibility.test_generate_without_threshold_still_works _
tests/integration/test_analyze_project_threshold.py:47: in mock_project_manager
    with patch('edgar_analyzer.cli.commands.project.Container.project_manager') as mock:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'edgar_analyzer.cli.commands.project' has no attribute 'Container'
=================================== FAILURES ===================================
________ TestEdgeCases.test_all_patterns_excluded_still_generates_code _________
tests/integration/test_analyze_project_threshold.py:334: in test_all_patterns_excluded_still_generates_code
    result = filter_service.filter_patterns(sample_parsed_examples, threshold=1.1)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/pattern_filter.py:75: in filter_patterns
    raise ValueError(f"Threshold must be in [0.0, 1.0], got {threshold}")
E   ValueError: Threshold must be in [0.0, 1.0], got 1.1
______ TestFileDataSourceMigration.test_edgar_wrapper_import_with_warning ______
tests/integration/test_batch1_datasources.py:47: in test_edgar_wrapper_import_with_warning
    assert len(w) >= 1
E   assert 0 >= 1
E    +  where 0 = len([])
_______________ TestPlatformImports.test_pattern_types_complete ________________
tests/integration/test_batch2_schema_services.py:82: in test_pattern_types_complete
    assert expected in pattern_types, f"Missing pattern type: {expected}"
E   AssertionError: Missing pattern type: constant_value
E   assert 'constant_value' in ['field_mapping', 'field_rename', 'type_conversion', 'field_extraction', 'calculation', 'array_first', ...]
________________ TestPlatformImports.test_field_types_complete _________________
tests/integration/test_batch2_schema_services.py:100: in test_field_types_complete
    assert expected in field_types, f"Missing field type: {expected}"
E   AssertionError: Missing field type: string
E   assert 'string' in ['str', 'int', 'float', 'decimal', 'bool', 'date', ...]
__________ TestBackwardCompatibility.test_deprecation_warnings_raised __________
tests/integration/test_batch2_schema_services.py:128: in test_deprecation_warnings_raised
    with pytest.warns(DeprecationWarning, match="edgar_analyzer.models.patterns"):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT WARN. No warnings of type (<class 'DeprecationWarning'>,) were emitted.
E    Emitted warnings: [].
__________ TestEndToEndPatternDetection.test_simple_field_rename_flow __________
tests/integration/test_batch2_schema_services.py:178: in test_simple_field_rename_flow
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
____________ TestEndToEndPatternDetection.test_type_conversion_flow ____________
tests/integration/test_batch2_schema_services.py:210: in test_type_conversion_flow
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
_____________ TestEndToEndPatternDetection.test_concatenation_flow _____________
tests/integration/test_batch2_schema_services.py:240: in test_concatenation_flow
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
__________ TestEndToEndPatternDetection.test_confidence_scores_valid ___________
tests/integration/test_batch2_schema_services.py:268: in test_confidence_scores_valid
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
____________ TestSchemaAnalysis.test_schema_inference_from_examples ____________
tests/integration/test_batch2_schema_services.py:293: in test_schema_inference_from_examples
    field_names = {f.name for f in schema.fields}
                   ^^^^^^
/opt/homebrew/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'SchemaField' object has no attribute 'name'
__________________ TestSchemaAnalysis.test_schema_comparison ___________________
tests/integration/test_batch2_schema_services.py:317: in test_schema_comparison
    assert len(diff.added_fields) > 0
               ^^^^^^^^^^^^^^^^^
E   AttributeError: 'list' object has no attribute 'added_fields'
______________ TestComplexPatterns.test_nested_structure_pattern _______________
tests/integration/test_batch2_schema_services.py:376: in test_nested_structure_pattern
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
___________________ TestComplexPatterns.test_array_handling ____________________
tests/integration/test_batch2_schema_services.py:394: in test_array_handling
    field_types = {f.name: f.field_type for f in schema.fields}
                   ^^^^^^
/opt/homebrew/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'SchemaField' object has no attribute 'name'
___________________ TestEdgeCases.test_inconsistent_schemas ____________________
tests/integration/test_batch2_schema_services.py:423: in test_inconsistent_schemas
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
________________________ TestEdgeCases.test_null_values ________________________
tests/integration/test_batch2_schema_services.py:442: in test_null_values
    middle_name_field = next(f for f in schema.fields if f.name == "middle_name")
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/integration/test_batch2_schema_services.py:442: in <genexpr>
    middle_name_field = next(f for f in schema.fields if f.name == "middle_name")
                                                         ^^^^^^
/opt/homebrew/lib/python3.13/site-packages/pydantic/main.py:1026: in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
E   AttributeError: 'SchemaField' object has no attribute 'name'
_______________________ test_batch2_complete_integration _______________________
tests/integration/test_batch2_schema_services.py:481: in test_batch2_complete_integration
    result = parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
_______________________ test_generate_weather_extractor ________________________
tests/integration/test_code_generation.py:224: in test_generate_weather_extractor
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=0.000156 error="'dict' object has no attribute 'input'" error_type=AttributeError
_____________________ test_generated_code_is_valid_python ______________________
tests/integration/test_code_generation.py:280: in test_generated_code_is_valid_python
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=9.2e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
______________________ test_generated_code_has_type_hints ______________________
tests/integration/test_code_generation.py:309: in test_generated_code_has_type_hints
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=8.5e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
______________________ test_generated_code_has_docstrings ______________________
tests/integration/test_code_generation.py:346: in test_generated_code_has_docstrings
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=8e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
___________________ test_generated_tests_reference_examples ____________________
tests/integration/test_code_generation.py:370: in test_generated_tests_reference_examples
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=8.3e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
__________________________ test_files_written_to_disk __________________________
tests/integration/test_code_generation.py:398: in test_files_written_to_disk
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:38 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:38 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:38 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:38 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:38 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:38 [info     ] Step 1: Parsing examples
2025-12-03 23:20:38 [error    ] Code generation failed         duration_seconds=8.4e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
____________________ test_minimal_examples_still_generates _____________________
tests/integration/test_code_generation.py:455: in test_minimal_examples_still_generates
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:39 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:39 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:39 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:39 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:39 [info     ] Starting code generation       examples=1 max_retries=3 project=minimal_test
2025-12-03 23:20:39 [info     ] Step 1: Parsing examples
2025-12-03 23:20:39 [error    ] Code generation failed         duration_seconds=0.000121 error="'dict' object has no attribute 'input'" error_type=AttributeError
_________________________ test_generation_performance __________________________
tests/integration/test_code_generation.py:479: in test_generation_performance
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:39 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:39 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:39 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:39 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:39 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:39 [info     ] Step 1: Parsing examples
2025-12-03 23:20:39 [error    ] Code generation failed         duration_seconds=0.000155 error="'dict' object has no attribute 'input'" error_type=AttributeError
_______________ test_iterative_refinement_on_validation_failure ________________
tests/integration/test_code_generation.py:542: in test_iterative_refinement_on_validation_failure
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:39 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:39 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:39 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:39 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:39 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:39 [info     ] Step 1: Parsing examples
2025-12-03 23:20:39 [error    ] Code generation failed         duration_seconds=8.4e-05 error="'dict' object has no attribute 'input'" error_type=AttributeError
__________________________ test_max_retries_exceeded ___________________________
tests/integration/test_code_generation.py:607: in test_max_retries_exceeded
    await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:39 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:39 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:39 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:39 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:39 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:39 [info     ] Step 1: Parsing examples
2025-12-03 23:20:39 [error    ] Code generation failed         duration_seconds=0.00014 error="'dict' object has no attribute 'input'" error_type=AttributeError
______________________ test_validation_disabled_no_retry _______________________
tests/integration/test_code_generation.py:639: in test_validation_disabled_no_retry
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:356: in generate
    parsed = self.parser.parse_examples(examples)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/services/analysis/example_parser.py:103: in parse_examples
    inputs = [ex.input for ex in examples]
              ^^^^^^^^
E   AttributeError: 'dict' object has no attribute 'input'
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:20:39 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:20:39 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:20:39 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:20:39 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=generated_test
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:20:39 [info     ] Starting code generation       examples=3 max_retries=3 project=weather_extractor
2025-12-03 23:20:39 [info     ] Step 1: Parsing examples
2025-12-03 23:20:39 [error    ] Code generation failed         duration_seconds=0.00015 error="'dict' object has no attribute 'input'" error_type=AttributeError
____________ TestWeatherAPILifecycle.test_weather_api_cli_commands _____________
tests/integration/test_weather_api_e2e.py:276: in test_weather_api_cli_commands
    assert result.exit_code == 0, f"CLI command failed: {result.output}"
E   AssertionError: CLI command failed: Error: Project 'weather_api_extractor' not found at 
E     projects/weather_api_extractor
E     Error validating project: 
E     Aborted!
E     
E   assert 1 == 0
E    +  where 1 = <Result SystemExit(1)>.exit_code
_ TestWeatherAPICodeGeneration.test_weather_api_generation_with_missing_examples _
tests/integration/test_weather_api_e2e.py:498: in test_weather_api_generation_with_missing_examples
    await code_generator.generate(
src/extract_transform_platform/services/codegen/code_generator.py:402: in generate
    plan = await self.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/ai/sonnet45_agent.py:396: in plan
    prompt = self.prompt_loader.render_pm_prompt(patterns, project)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/ai/sonnet45_agent.py:120: in render_pm_prompt
    template = self.load_template("pm_mode_prompt.md")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/extract_transform_platform/ai/sonnet45_agent.py:96: in load_template
    raise FileNotFoundError(f"Prompt template not found: {template_path}")
E   FileNotFoundError: Prompt template not found: /Users/masa/Clients/Zach/projects/edgar/src/extract_transform_platform/ai/prompts/pm_mode_prompt.md
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:21:56 [info     ] OpenRouterClient initialized   available_models=3 base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:21:56 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/extract_transform_platform/ai/prompts
2025-12-03 23:21:56 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:21:56 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=./generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:21:56 [info     ] Starting code generation       examples=0 max_retries=3 project=weather_api_extractor
2025-12-03 23:21:56 [info     ] Step 1: Parsing examples
2025-12-03 23:21:56 [info     ] Examples parsed                input_fields=0 output_fields=0 patterns=0
2025-12-03 23:21:56 [info     ] Step 2: PM mode planning
2025-12-03 23:21:56 [info     ] Starting PM mode planning      pattern_count=0
2025-12-03 23:21:56 [error    ] Code generation failed         duration_seconds=0.00043082237243652344 error='Prompt template not found: /Users/masa/Clients/Zach/projects/edgar/src/extract_transform_platform/ai/prompts/pm_mode_prompt.md' error_type=FileNotFoundError
------------------------------ Captured log call -------------------------------
WARNING  extract_transform_platform.services.analysis.example_parser:example_parser.py:95 No examples provided to parse
___________________ TestPMModePlanning.test_pm_mode_planning ___________________
tests/integration/test_weather_api_generation.py:278: in test_pm_mode_planning
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:21:56 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:21:56 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:21:56 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:21:56 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:21:56 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:21:56 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:21:56 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:21:56 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:21:56 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:21:56 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:21:56 [debug    ] Waiting 1s before retry
2025-12-03 23:21:57 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:21:57 [debug    ] Waiting 2s before retry
2025-12-03 23:21:59 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:21:59 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:21:59 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
____________ TestPMModePlanning.test_plan_contains_extractor_class _____________
tests/integration/test_weather_api_generation.py:300: in test_plan_contains_extractor_class
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:00 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:00 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:00 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:00 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:00 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:00 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:00 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:00 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:00 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:00 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:00 [debug    ] Waiting 1s before retry
2025-12-03 23:22:01 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:01 [debug    ] Waiting 2s before retry
2025-12-03 23:22:03 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:03 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:03 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestPMModePlanning.test_plan_includes_dependencies ______________
tests/integration/test_weather_api_generation.py:321: in test_plan_includes_dependencies
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:03 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:03 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:03 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:03 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:03 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:03 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:03 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:03 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:03 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:03 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:03 [debug    ] Waiting 1s before retry
2025-12-03 23:22:04 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:04 [debug    ] Waiting 2s before retry
2025-12-03 23:22:06 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:06 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:06 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestCoderModeGeneration.test_coder_mode_generation ______________
tests/integration/test_weather_api_generation.py:352: in test_coder_mode_generation
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:06 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:06 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:06 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:06 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:06 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:06 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:06 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:06 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:06 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:07 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:07 [debug    ] Waiting 1s before retry
2025-12-03 23:22:08 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:08 [debug    ] Waiting 2s before retry
2025-12-03 23:22:10 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:10 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:10 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
__________ TestCoderModeGeneration.test_generated_extractor_has_class __________
tests/integration/test_weather_api_generation.py:386: in test_generated_extractor_has_class
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:10 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:10 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:10 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:10 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:10 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:10 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:10 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:10 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:10 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:10 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:10 [debug    ] Waiting 1s before retry
2025-12-03 23:22:11 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:11 [debug    ] Waiting 2s before retry
2025-12-03 23:22:13 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:13 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:13 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
_______ TestCoderModeGeneration.test_generated_code_implements_interface _______
tests/integration/test_weather_api_generation.py:405: in test_generated_code_implements_interface
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:13 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:13 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:13 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:13 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:13 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:13 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:13 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:13 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:13 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:14 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:14 [debug    ] Waiting 1s before retry
2025-12-03 23:22:15 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:15 [debug    ] Waiting 2s before retry
2025-12-03 23:22:17 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:17 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:17 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestCoderModeGeneration.test_generated_tests_exist ______________
tests/integration/test_weather_api_generation.py:426: in test_generated_tests_exist
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:17 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:17 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:17 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:17 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:17 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:17 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:17 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:17 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:17 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:17 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:17 [debug    ] Waiting 1s before retry
2025-12-03 23:22:18 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:18 [debug    ] Waiting 2s before retry
2025-12-03 23:22:20 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:20 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:20 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
_____________ TestConstraintValidation.test_constraint_validation ______________
tests/integration/test_weather_api_generation.py:459: in test_constraint_validation
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:20 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:20 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:20 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:20 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:20 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:20 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:20 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:20 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:20 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:21 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:21 [debug    ] Waiting 1s before retry
2025-12-03 23:22:22 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:22 [debug    ] Waiting 2s before retry
2025-12-03 23:22:24 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:24 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:24 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestConstraintValidation.test_code_has_type_hints _______________
tests/integration/test_weather_api_generation.py:481: in test_code_has_type_hints
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:24 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:24 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:24 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:24 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:24 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:24 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:24 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:24 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:24 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:24 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:24 [debug    ] Waiting 1s before retry
2025-12-03 23:22:25 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:25 [debug    ] Waiting 2s before retry
2025-12-03 23:22:27 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:27 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:27 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestConstraintValidation.test_code_has_docstrings _______________
tests/integration/test_weather_api_generation.py:504: in test_code_has_docstrings
    plan = await code_generator.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:27 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:27 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:27 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:27 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:27 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:27 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:27 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:27 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:27 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:27 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:27 [debug    ] Waiting 1s before retry
2025-12-03 23:22:28 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:28 [debug    ] Waiting 2s before retry
2025-12-03 23:22:31 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:31 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:31 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
______________ TestEndToEndGeneration.test_end_to_end_generation _______________
tests/integration/test_weather_api_generation.py:540: in test_end_to_end_generation
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:369: in generate
    plan = await self.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:31 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:31 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:31 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:31 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:31 [info     ] Starting code generation       examples=7 max_retries=3 project=weather_api_extractor
2025-12-03 23:22:31 [info     ] Step 1: Parsing examples
2025-12-03 23:22:31 [info     ] Examples parsed                input_fields=27 output_fields=10 patterns=10
2025-12-03 23:22:31 [info     ] Step 2: PM mode planning
2025-12-03 23:22:31 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:31 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:31 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:31 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:31 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:31 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:31 [debug    ] Waiting 1s before retry
2025-12-03 23:22:32 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:32 [debug    ] Waiting 2s before retry
2025-12-03 23:22:34 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:34 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:34 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
2025-12-03 23:22:34 [error    ] Code generation failed         duration_seconds=3.382006 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError
______________ TestEndToEndGeneration.test_generated_files_exist _______________
tests/integration/test_weather_api_generation.py:577: in test_generated_files_exist
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:369: in generate
    plan = await self.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:34 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:34 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:34 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:34 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:34 [info     ] Starting code generation       examples=7 max_retries=3 project=weather_api_extractor
2025-12-03 23:22:34 [info     ] Step 1: Parsing examples
2025-12-03 23:22:34 [info     ] Examples parsed                input_fields=27 output_fields=10 patterns=10
2025-12-03 23:22:34 [info     ] Step 2: PM mode planning
2025-12-03 23:22:34 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:34 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:34 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:34 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:34 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:34 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:34 [debug    ] Waiting 1s before retry
2025-12-03 23:22:35 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:35 [debug    ] Waiting 2s before retry
2025-12-03 23:22:37 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:37 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:37 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
2025-12-03 23:22:37 [error    ] Code generation failed         duration_seconds=3.268274 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError
______________ TestEndToEndGeneration.test_generated_code_quality ______________
tests/integration/test_weather_api_generation.py:608: in test_generated_code_quality
    context = await code_generator.generate(
src/edgar_analyzer/services/code_generator.py:369: in generate
    plan = await self.agent.plan(parsed.patterns, project_config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/edgar_analyzer/agents/sonnet45_agent.py:405: in plan
    response = await self.client.chat_completion_json(
src/edgar_analyzer/clients/openrouter_client.py:401: in chat_completion_json
    return await self.chat_completion(
src/edgar_analyzer/clients/openrouter_client.py:343: in chat_completion
    raise last_error
src/edgar_analyzer/clients/openrouter_client.py:301: in chat_completion
    response = await self.client.chat.completions.create(**request_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:2672: in create
    return await self._post(
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
---------------------------- Captured stdout setup -----------------------------
2025-12-03 23:22:37 [info     ] OpenRouterClient initialized   base_url=https://openrouter.ai/api/v1 model=anthropic/claude-sonnet-4.5 timeout=120
2025-12-03 23:22:37 [debug    ] PromptLoader initialized       prompts_dir=/Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/agents/prompts
2025-12-03 23:22:37 [info     ] Sonnet45Agent initialized      coder_temperature=0.2 model=anthropic/claude-sonnet-4.5 pm_temperature=0.3
2025-12-03 23:22:37 [info     ] CodeGeneratorService initialized model=anthropic/claude-sonnet-4.5 output_dir=/Users/masa/Clients/Zach/projects/edgar/projects/weather_api/generated
----------------------------- Captured stdout call -----------------------------
2025-12-03 23:22:37 [info     ] Starting code generation       examples=7 max_retries=3 project=weather_api_extractor
2025-12-03 23:22:37 [info     ] Step 1: Parsing examples
2025-12-03 23:22:37 [info     ] Examples parsed                input_fields=27 output_fields=10 patterns=10
2025-12-03 23:22:37 [info     ] Step 2: PM mode planning
2025-12-03 23:22:37 [info     ] Starting PM mode planning      pattern_count=10
2025-12-03 23:22:37 [debug    ] Loaded prompt template         size=7464 template=pm_mode_prompt.md
2025-12-03 23:22:37 [debug    ] Rendered PM prompt             pattern_count=10 prompt_length=26975
2025-12-03 23:22:37 [debug    ] Using JSON output mode         model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:37 [debug    ] Making chat completion request max_tokens=8000 message_count=2 model=anthropic/claude-sonnet-4.5 temperature=0.3
2025-12-03 23:22:38 [warning  ] Chat completion attempt failed attempt=1 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:38 [debug    ] Waiting 1s before retry
2025-12-03 23:22:39 [warning  ] Chat completion attempt failed attempt=2 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:39 [debug    ] Waiting 2s before retry
2025-12-03 23:22:41 [warning  ] Chat completion attempt failed attempt=3 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:41 [error    ] Chat completion failed after all retries final_error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" max_attempts=3 model=anthropic/claude-sonnet-4.5
2025-12-03 23:22:41 [error    ] PM mode API call failed        error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}"
2025-12-03 23:22:41 [error    ] Code generation failed         duration_seconds=3.343203 error="Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}" error_type=AuthenticationError
______________________________ test_50_companies _______________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_openrouter_service ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_llm_service_integration _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_model_independence ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________________________ test_cli_chatbot _______________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_cli_with_fallback ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_compaction_metrics ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_multiple_compactions ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_early_context_preserved _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_summary_accumulation ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_named_entity_recall ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________ TestEmployeeRosterPOC.test_excel_data_source_integration ___________
tests/test_employee_roster_poc.py:129: in test_excel_data_source_integration
    assert "records" in result
           ^^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'coroutine' is not iterable
___________________ TestEmployeeRosterPOC.test_data_quality ____________________
tests/test_employee_roster_poc.py:191: in test_data_quality
    records = result["records"]
              ^^^^^^^^^^^^^^^^^
E   TypeError: 'coroutine' object is not subscriptable
____________ TestEmployeeRosterPOC.test_example_matches_source_data ____________
tests/test_employee_roster_poc.py:216: in test_example_matches_source_data
    records = result["records"]
              ^^^^^^^^^^^^^^^^^
E   TypeError: 'coroutine' object is not subscriptable
_______________________ test_validation_with_sample_data _______________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_no_tiktoken_fallback ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_llm_failure_handling ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
______________________ test_empty_conversation_compaction ______________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________________ test_malformed_summary_response ________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_very_long_exchange ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_rapid_compaction_cycles _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_edge_case_token_counts __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_concurrent_access ____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_fmp_api_integration ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_grok_qa_capabilities ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________________________ test_llm_direct ________________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_____________________________ test_llm_extraction ______________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_compaction_performance __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_______________________ test_token_counting_performance ________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_____________________________ test_memory_overhead _____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_____________________ test_large_conversation_performance ______________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_summarizer_performance __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_proxy_extraction _____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
____________________________ test_reusable_library _____________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_self_improving_pattern __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_subprocess_monitoring __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_llm_service_web_search __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_supervisor_web_search __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
___________________________ test_engineer_web_search ___________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_controller_web_search __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
_________________________ test_edgartools_installation _________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
__________________________ test_xbrl_proxy_extraction __________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
________________________ test_enhanced_edgar_extraction ________________________
async def functions are not natively supported.
You need to install a suitable plugin for your async framework, for example:
  - anyio
  - pytest-asyncio
  - pytest-tornasync
  - pytest-trio
  - pytest-twisted
______________ TestSetupTestCommand.test_cli_command_all_services ______________
tests/unit/cli/test_setup_command.py:81: in test_cli_command_all_services
    assert result.exit_code == 0
E   assert 2 == 0
E    +  where 2 = <Result SystemExit(2)>.exit_code
____________ TestSetupTestCommand.test_cli_command_openrouter_only _____________
tests/unit/cli/test_setup_command.py:92: in test_cli_command_openrouter_only
    assert result.exit_code == 0
E   assert 2 == 0
E    +  where 2 = <Result SystemExit(2)>.exit_code
________________ TestSetupTestCommand.test_cli_command_failure _________________
tests/unit/cli/test_setup_command.py:105: in test_cli_command_failure
    assert result.exit_code == 1  # Abort
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 2 == 1
E    +  where 2 = <Result SystemExit(2)>.exit_code
____________ TestJinaDataSource.test_jina_initialization_free_tier _____________
tests/unit/test_data_sources.py:424: in test_jina_initialization_free_tier
    assert jina.rate_limit_per_minute == 20  # Free tier limit
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 200 == 20
E    +  where 200 = <edgar_analyzer.data_sources.jina_source.JinaDataSource object at 0x114b73b10>.rate_limit_per_minute
=============================== warnings summary ===============================
src/edgar_analyzer/models/company.py:23
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/models/company.py:23: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('cik')

src/edgar_analyzer/models/company.py:28
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/models/company.py:28: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('ticker')

tests/integration/test_weather_api_e2e.py:151
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_weather_api_e2e.py:151: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/integration/test_weather_api_e2e.py:473
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_weather_api_e2e.py:473: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/integration/test_weather_api_e2e.py:511
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_weather_api_e2e.py:511: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/integration/test_weather_api_e2e.py:651
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_weather_api_e2e.py:651: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

src/edgar_analyzer/data_sources/__init__.py:18
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/data_sources/__init__.py:18: DeprecationWarning: edgar_analyzer.data_sources.base is deprecated. Import from extract_transform_platform.core instead:
    from extract_transform_platform.core import BaseDataSource, IDataSource
    from .base import IDataSource, BaseDataSource

src/edgar_analyzer/data_sources/__init__.py:19
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/data_sources/__init__.py:19: DeprecationWarning: edgar_analyzer.data_sources.api_source is deprecated. Use 'from extract_transform_platform.data_sources.web import APIDataSource' instead. This wrapper will be removed in a future version.
    from .api_source import APIDataSource

src/edgar_analyzer/data_sources/__init__.py:21
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/data_sources/__init__.py:21: DeprecationWarning: edgar_analyzer.data_sources.file_source is deprecated. Use extract_transform_platform.data_sources.file.file_source instead. This module will be removed in version 2.0.0.
    from .file_source import FileDataSource

src/edgar_analyzer/data_sources/__init__.py:22
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/data_sources/__init__.py:22: DeprecationWarning: edgar_analyzer.data_sources.excel_source is deprecated. Import from extract_transform_platform.data_sources.file.excel_source instead. This wrapper will be removed in a future version.
    from .excel_source import ExcelDataSource

src/edgar_analyzer/data_sources/__init__.py:24
  /Users/masa/Clients/Zach/projects/edgar/src/edgar_analyzer/data_sources/__init__.py:24: DeprecationWarning: edgar_analyzer.data_sources.url_source is deprecated. Use extract_transform_platform.data_sources.URLDataSource instead.
    from .url_source import URLDataSource

tests/test_external_artifacts.py:24
  /Users/masa/Clients/Zach/projects/edgar/tests/test_external_artifacts.py:24: PytestCollectionWarning: cannot collect test class 'TestRunner' because it has a __init__ constructor (from: tests/test_external_artifacts.py)
    class TestRunner:

tests/test_skip_decorator.py:26
  /Users/masa/Clients/Zach/projects/edgar/tests/test_skip_decorator.py:26: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:320
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:320: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:420
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:420: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:494
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:494: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:582
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:582: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:635
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:635: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:717
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:717: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:785
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:785: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:848
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:848: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/services/test_code_generator_progress.py:912
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/services/test_code_generator_progress.py:912: PytestUnknownMarkWarning: Unknown pytest.mark.requires_api - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.requires_api

tests/unit/test_data_sources.py:31
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:31: DeprecationWarning: edgar_analyzer.utils.rate_limiter is deprecated. Import from extract_transform_platform.utils instead:
    from extract_transform_platform.utils import RateLimiter
    from edgar_analyzer.utils.rate_limiter import RateLimiter

tests/integration/test_batch1_datasources.py::TestJinaDataSourceMigration::test_identical_functionality
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_batch1_datasources.py:392: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    wrapper_result = await WrapperJina(api_key="test").fetch(url="https://example.com")

tests/integration/test_batch1_datasources.py::TestNoBreakingChanges::test_jina_source_api_unchanged
  /Users/masa/Clients/Zach/projects/edgar/tests/integration/test_batch1_datasources.py:666: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    source = JinaDataSource(api_key="test")

tests/test_invoice_poc.py::TestInvoicePOC::test_pdf_data_source_integration
  /Users/masa/Clients/Zach/projects/edgar/tests/test_invoice_poc.py:120: DeprecationWarning: edgar_analyzer.data_sources.pdf_source.PDFDataSource is deprecated. Import from extract_transform_platform.data_sources.file.PDFDataSource instead. This wrapper will be removed in a future version.
    data_source = PDFDataSource(

tests/test_invoice_poc.py: 15 warnings
  /Users/masa/Clients/Zach/projects/edgar/src/extract_transform_platform/data_sources/file/pdf_source.py:384: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
    df[col] = pd.to_datetime(df[col])

tests/test_invoice_poc.py::TestInvoicePOC::test_type_inference
  /Users/masa/Clients/Zach/projects/edgar/tests/test_invoice_poc.py:157: DeprecationWarning: edgar_analyzer.data_sources.pdf_source.PDFDataSource is deprecated. Import from extract_transform_platform.data_sources.file.PDFDataSource instead. This wrapper will be removed in a future version.
    data_source = PDFDataSource(

tests/test_invoice_poc.py::TestInvoicePOC::test_data_quality
  /Users/masa/Clients/Zach/projects/edgar/tests/test_invoice_poc.py:225: DeprecationWarning: edgar_analyzer.data_sources.pdf_source.PDFDataSource is deprecated. Import from extract_transform_platform.data_sources.file.PDFDataSource instead. This wrapper will be removed in a future version.
    data_source = PDFDataSource(

tests/test_invoice_poc.py::TestInvoicePOC::test_example_matches_source_data
  /Users/masa/Clients/Zach/projects/edgar/tests/test_invoice_poc.py:248: DeprecationWarning: edgar_analyzer.data_sources.pdf_source.PDFDataSource is deprecated. Import from extract_transform_platform.data_sources.file.PDFDataSource instead. This wrapper will be removed in a future version.
    data_source = PDFDataSource(

tests/test_invoice_poc.py::TestInvoicePOC::test_pattern_compliance
  /opt/homebrew/lib/python3.13/site-packages/yaml/scanner.py:264: RuntimeWarning: coroutine 'ExcelDataSource.fetch' was never awaited
    def next_possible_simple_key(self):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_invoice_poc.py::TestInvoicePOC::test_end_to_end_poc_validation
  /Users/masa/Clients/Zach/projects/edgar/tests/test_invoice_poc.py:299: DeprecationWarning: edgar_analyzer.data_sources.pdf_source.PDFDataSource is deprecated. Import from extract_transform_platform.data_sources.file.PDFDataSource instead. This wrapper will be removed in a future version.
    data_source = PDFDataSource(

tests/test_web_search_structure.py::test_llm_service_structure
  /opt/homebrew/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_web_search_structure.py::test_llm_service_structure returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_web_search_structure.py::test_supervisor_structure
  /opt/homebrew/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_web_search_structure.py::test_supervisor_structure returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_web_search_structure.py::test_engineer_structure
  /opt/homebrew/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_web_search_structure.py::test_engineer_structure returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_web_search_structure.py::test_controller_structure
  /opt/homebrew/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_web_search_structure.py::test_controller_structure returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_default_projects_dir_in_repo
  tests/unit/services/test_project_manager.py:464: PytestWarning: The test <Function test_default_projects_dir_in_repo> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_default_projects_dir_in_repo(self, tmp_path, monkeypatch):

tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_override
  tests/unit/services/test_project_manager.py:475: PytestWarning: The test <Function test_projects_dir_env_override> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_projects_dir_env_override(self, tmp_path, monkeypatch):

tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_expanduser
  tests/unit/services/test_project_manager.py:488: PytestWarning: The test <Function test_projects_dir_env_expanduser> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_projects_dir_env_expanduser(self, monkeypatch):

tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_empty_string
  tests/unit/services/test_project_manager.py:500: PytestWarning: The test <Function test_projects_dir_env_empty_string> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_projects_dir_env_empty_string(self, monkeypatch):

tests/unit/services/test_project_manager.py::TestDirectoryManagement::test_projects_dir_env_whitespace_only
  tests/unit/services/test_project_manager.py:511: PytestWarning: The test <Function test_projects_dir_env_whitespace_only> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_projects_dir_env_whitespace_only(self, monkeypatch):

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_initialization_free_tier
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:422: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource()

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_initialization_paid_tier
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:429: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource(api_key="jina_test_key_12345")

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_markdown_response
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:437: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource(rate_limit_per_minute=9999)

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_json_response
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:458: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource(rate_limit_per_minute=9999)

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_fetch_invalid_url
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:485: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource()

tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_get_cache_key
  /Users/masa/Clients/Zach/projects/edgar/tests/unit/test_data_sources.py:495: DeprecationWarning: edgar_analyzer.data_sources.JinaDataSource is deprecated. Use extract_transform_platform.data_sources.JinaDataSource instead. This compatibility wrapper will be removed in Phase 3.
    jina = JinaDataSource()

tests/unit/test_setup_command.py::TestSetupCommand::test_setup_interactive_mode
tests/unit/test_setup_command.py::TestSetupCommand::test_setup_handles_empty_value
  /opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/getpass.py:61: GetPassWarning: Can not control echo on the terminal.
    passwd = fallback_getpass(prompt, stream)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.7-final-0 _______________

Name                                                                     Stmts   Miss  Cover   Missing
------------------------------------------------------------------------------------------------------
src/edgar_analyzer/__init__.py                                               0      0   100%
src/edgar_analyzer/__main__.py                                               4      4     0%   8-12
src/edgar_analyzer/agents/__init__.py                                        2      0   100%
src/edgar_analyzer/agents/sonnet45_agent.py                                238     54    77%   161, 163, 205-243, 255-286, 422, 424, 426, 505, 673, 689-690, 698-699, 727
src/edgar_analyzer/cli/__init__.py                                           0      0   100%
src/edgar_analyzer/cli/commands/__init__.py                                  3      0   100%
src/edgar_analyzer/cli/commands/project.py                                 194     19    90%   47-48, 111, 116-117, 183-186, 236-237, 289-291, 385-386, 400, 417, 450
src/edgar_analyzer/cli/commands/setup.py                                   178     36    80%   68, 93-95, 137-141, 151, 157-165, 170-179, 191-192, 205-206, 295-296, 330-335
src/edgar_analyzer/cli/main.py                                             692    575    17%   51-71, 75, 82-85, 92-93, 101-104, 111-112, 116-134, 138-139, 151-154, 181-195, 202-203, 225-277, 296-345, 359-401, 422-531, 560-733, 756-885, 906-1055, 1076-1213, 1221-1224, 1234-1273, 1278-1289, 1294-1327, 1332-1367, 1372-1381, 1385
src/edgar_analyzer/cli/prompts/__init__.py                                   0      0   100%
src/edgar_analyzer/cli/prompts/confidence_threshold.py                      55      0   100%
src/edgar_analyzer/clients/__init__.py                                       2      0   100%
src/edgar_analyzer/clients/openrouter_client.py                             88     26    70%   189, 278, 304-317, 388-396, 434-460, 464-465, 469-470
src/edgar_analyzer/config/__init__.py                                        0      0   100%
src/edgar_analyzer/config/container.py                                      33      0   100%
src/edgar_analyzer/config/settings.py                                       96     42    56%   86-93, 104-106, 115-116, 121-148, 154-162, 166, 176, 186, 197, 208-211, 223-225
src/edgar_analyzer/controllers/self_improving_extraction_controller.py      41     28    32%   32-54, 76-130, 142-158, 163-187
src/edgar_analyzer/data_sources/__init__.py                                  8      0   100%
src/edgar_analyzer/data_sources/api_source.py                                6      0   100%
src/edgar_analyzer/data_sources/base.py                                      6      0   100%
src/edgar_analyzer/data_sources/excel_source.py                              5      0   100%
src/edgar_analyzer/data_sources/file_source.py                               4      0   100%
src/edgar_analyzer/data_sources/jina_source.py                               7      0   100%
src/edgar_analyzer/data_sources/pdf_source.py                                9      0   100%
src/edgar_analyzer/data_sources/url_source.py                                4      0   100%
src/edgar_analyzer/extractors/adaptive_compensation_extractor.py           125    108    14%   28-29, 41-55, 66-106, 117-143, 147-196, 200-222, 226-231, 235-246, 250-257
src/edgar_analyzer/main_cli.py                                             140    140     0%   18-303
src/edgar_analyzer/models/__init__.py                                        0      0   100%
src/edgar_analyzer/models/company.py                                        96     32    67%   26, 31, 78-80, 85-91, 96-106, 119-120, 125-131, 136-139
src/edgar_analyzer/models/intermediate_data.py                             172    172     0%   3-345
src/edgar_analyzer/models/patterns.py                                        4      0   100%
src/edgar_analyzer/models/plan.py                                            2      0   100%
src/edgar_analyzer/models/project_config.py                                  2      0   100%
src/edgar_analyzer/models/validation.py                                      2      0   100%
src/edgar_analyzer/patterns/self_improving_code.py                         133    114    14%   40-48, 54-57, 61-78, 82-88, 108-168, 172-184, 193-255, 268-331, 338-369
src/edgar_analyzer/services/__init__.py                                      0      0   100%
src/edgar_analyzer/services/agentic_control_service.py                      45     45     0%   5-183
src/edgar_analyzer/services/auto_resume_service.py                          81     81     0%   3-182
src/edgar_analyzer/services/breakthrough_xbrl_service.py                   166    166     0%   8-339
src/edgar_analyzer/services/cache_service.py                                91     74    19%   21-26, 31-32, 36-46, 50-74, 78-96, 100-107, 111-118, 122-146
src/edgar_analyzer/services/checkpoint_extraction_service.py               110    110     0%   3-312
src/edgar_analyzer/services/checkpoint_report_service.py                   143    143     0%   3-382
src/edgar_analyzer/services/code_generator.py                              170    124    27%   74-127, 131-135, 139-149, 153, 203-243, 371-496, 541-589
src/edgar_analyzer/services/company_service.py                             111     93    16%   26-32, 36-50, 54-56, 60-90, 94-106, 110-129, 133-149, 153-170, 174-191
src/edgar_analyzer/services/constraint_enforcer.py                          52      9    83%   137-140, 184, 198-212, 216
src/edgar_analyzer/services/data_extraction_service.py                     403    374     7%   41-56, 60-97, 103-130, 136-207, 211-238, 244-303, 307-369, 378-460, 469-596, 600-678, 682-721, 726-738, 742-760, 769-883, 887-923, 929-970
src/edgar_analyzer/services/edgar_api_service.py                            75     57    24%   22-28, 32-43, 47-55, 60-98, 102-107, 111-116, 122-123, 127-129
src/edgar_analyzer/services/enhanced_data_extraction_service.py             99     83    16%   28-35, 46-66, 79-101, 106-128, 133-160, 170-214, 218-221
src/edgar_analyzer/services/enhanced_report_service.py                     160    132    18%   33-42, 48-81, 85-106, 110-124, 133-157, 167-183, 187-249, 253-320, 324-344, 348-352, 356-382, 386
src/edgar_analyzer/services/enhanced_table_parser.py                       135    135     0%   5-270
src/edgar_analyzer/services/example_parser.py                                8      0   100%
src/edgar_analyzer/services/fmp_api_service.py                              81     66    19%   18-84, 88-91, 95-96, 100, 105-149, 154-170, 175-203, 216-225
src/edgar_analyzer/services/historical_analysis_service.py                  82     67    18%   37-42, 48-102, 108-120, 126-139, 143-159, 163-173
src/edgar_analyzer/services/interfaces.py                                   72     21    71%   21, 26, 31, 40, 45, 50, 55, 64, 71, 78, 89, 94, 99, 108, 113, 118, 123, 132, 137, 142, 147
src/edgar_analyzer/services/llm_service.py                                 101     85    16%   24-32, 63-74, 101-142, 168-233, 245-348, 359-496
src/edgar_analyzer/services/model_config.py                                 66     66     0%   38-248
src/edgar_analyzer/services/multi_source_enhanced_service.py               102    102     0%   12-237
src/edgar_analyzer/services/openrouter_service.py                           59     43    27%   69-117, 123, 132, 174-221, 242-272, 276, 280
src/edgar_analyzer/services/parallel_processing_service.py                  67     54    19%   19-23, 37-61, 67-82, 88-103, 112-135, 144-164
src/edgar_analyzer/services/prompt_generator.py                              2      0   100%
src/edgar_analyzer/services/qa_controller.py                               216    216     0%   5-428
src/edgar_analyzer/services/report_service.py                              115     95    17%   30-35, 41-72, 76-122, 126-140, 144-188, 192-224
src/edgar_analyzer/services/sample_report_generator.py                     242    242     0%   3-622
src/edgar_analyzer/services/schema_analyzer.py                               7      0   100%
src/edgar_analyzer/services/validation_service.py                          199    163    18%   38-50, 63-102, 113-159, 168-207, 211-239, 243-279, 283-303, 307-316, 320-330, 335-340, 346, 350-365
src/edgar_analyzer/services/xbrl_enhanced_extraction_service.py            111    111     0%   8-233
src/edgar_analyzer/utils/__init__.py                                         0      0   100%
src/edgar_analyzer/utils/fortune500_builder.py                              52     52     0%   3-213
src/edgar_analyzer/utils/rate_limiter.py                                     4      0   100%
src/edgar_analyzer/validation/__init__.py                                    4      0   100%
src/edgar_analyzer/validation/data_validator.py                            107     83    22%   33-34, 38, 66-114, 118-176, 187-262, 266-296, 308-358
src/edgar_analyzer/validation/quality_reporter.py                          185    160    14%   26-34, 43-89, 93-158, 162-209, 225-279, 295-303, 312-325, 329-361, 365-378, 390-406, 420
src/edgar_analyzer/validation/sanity_checker.py                            107     91    15%   19-20, 24, 54-71, 75-114, 118-155, 159-177, 181-218, 222-272, 276-294
src/edgar_analyzer/validation/source_verifier.py                           110     89    19%   22-24, 28, 69-98, 107-166, 175-219, 223-234, 242-258, 263-283, 294-308, 319-332, 343-344
src/edgar_analyzer/validators/__init__.py                                    8      0   100%
src/edgar_analyzer/validators/complexity_validator.py                       42      3    93%   146, 151, 174
src/edgar_analyzer/validators/dependency_injection_validator.py             29      3    90%   52, 72-75
src/edgar_analyzer/validators/import_validator.py                           21      2    90%   72, 87
src/edgar_analyzer/validators/interface_validator.py                        22      2    91%   59-61
src/edgar_analyzer/validators/logging_validator.py                          59      2    97%   131, 172
src/edgar_analyzer/validators/security_validator.py                         85      5    94%   123, 182, 197-198, 210
src/edgar_analyzer/validators/type_hint_validator.py                        26      1    96%   48
src/extract_transform_platform/__init__.py                                   4      0   100%
src/extract_transform_platform/agents/__init__.py                            1      1     0%   15
src/extract_transform_platform/ai/__init__.py                                5      0   100%
src/extract_transform_platform/ai/config.py                                 35     15    57%   85-87, 123-140, 163, 189
src/extract_transform_platform/ai/openrouter_client.py                      94     55    41%   198, 211, 242-243, 288-358, 390-416, 449-475, 479-480, 484-485, 503-504
src/extract_transform_platform/ai/prompt_templates.py                       48     35    27%   325-343, 366-369, 392-394, 412-420, 432-453
src/extract_transform_platform/ai/sonnet45_agent.py                        238    193    19%   98-103, 123-139, 158-191, 212-250, 262-293, 399-456, 492-570, 601-623, 642-682, 691-697, 701-706, 711-736, 740-759
src/extract_transform_platform/cli/__init__.py                               1      1     0%   14
src/extract_transform_platform/cli/commands.py                               0      0   100%
src/extract_transform_platform/clients/__init__.py                           1      1     0%   14
src/extract_transform_platform/codegen/__init__.py                           1      1     0%   16
src/extract_transform_platform/codegen/generator.py                          0      0   100%
src/extract_transform_platform/codegen/validator.py                          0      0   100%
src/extract_transform_platform/container/__init__.py                         1      1     0%   16
src/extract_transform_platform/core/__init__.py                              2      0   100%
src/extract_transform_platform/core/base.py                                 77      1    99%   144
src/extract_transform_platform/data_sources/__init__.py                      3      0   100%
src/extract_transform_platform/data_sources/file/__init__.py                 4      0   100%
src/extract_transform_platform/data_sources/file/csv_source.py               0      0   100%
src/extract_transform_platform/data_sources/file/excel_source.py           113      9    92%   183-184, 228, 263-265, 337-338, 342-346
src/extract_transform_platform/data_sources/file/file_source.py             85      7    92%   177-178, 204-205, 227-229
src/extract_transform_platform/data_sources/file/pdf_source.py             140     54    61%   185, 212, 221-222, 229-230, 240, 247, 252, 262-263, 268, 278, 289, 291, 318-331, 412-413, 429-464, 480-485
src/extract_transform_platform/data_sources/web/__init__.py                  4      0   100%
src/extract_transform_platform/data_sources/web/api_source.py               52      0   100%
src/extract_transform_platform/data_sources/web/jina_source.py              62      0   100%
src/extract_transform_platform/data_sources/web/url_source.py               39      0   100%
src/extract_transform_platform/interfaces/__init__.py                        1      1     0%   15
src/extract_transform_platform/models/__init__.py                            5      0   100%
src/extract_transform_platform/models/patterns.py                          185     13    93%   194, 202-205, 211, 440, 449, 456, 558, 562-565
src/extract_transform_platform/models/plan.py                              147      9    94%   126, 128, 130, 200, 258, 276, 355, 363, 583
src/extract_transform_platform/models/project_config.py                    221      1    99%   791
src/extract_transform_platform/models/transformation_pattern.py              0      0   100%
src/extract_transform_platform/models/validation.py                         62      1    98%   102
src/extract_transform_platform/reports/__init__.py                           8      8     0%   61-99
src/extract_transform_platform/reports/base.py                              71     71     0%   22-465
src/extract_transform_platform/reports/docx_generator.py                    98     98     0%   27-376
src/extract_transform_platform/reports/excel_generator.py                  122    122     0%   25-463
src/extract_transform_platform/reports/factory.py                           40     40     0%   25-220
src/extract_transform_platform/reports/pdf_generator.py                     96     96     0%   24-475
src/extract_transform_platform/reports/pptx_generator.py                   133    133     0%   25-453
src/extract_transform_platform/services/__init__.py                          2      0   100%
src/extract_transform_platform/services/analysis/__init__.py                 3      0   100%
src/extract_transform_platform/services/analysis/example_parser.py         200     45    78%   159, 203, 213, 247, 267-269, 282-286, 311, 361-390, 404-406, 481, 562, 569, 577-580, 603, 606-609, 624, 629, 637, 641, 660, 668
src/extract_transform_platform/services/analysis/pattern_filter.py          38      0   100%
src/extract_transform_platform/services/analysis/schema_analyzer.py        131     11    92%   323, 339, 359, 361, 363, 366-371, 416
src/extract_transform_platform/services/cache_service.py                     0      0   100%
src/extract_transform_platform/services/codegen/__init__.py                  4      0   100%
src/extract_transform_platform/services/codegen/code_generator.py          214     32    85%   230-232, 484-486, 571-573, 614-662
src/extract_transform_platform/services/codegen/constraint_enforcer.py      52      0   100%
src/extract_transform_platform/services/codegen/exceptions.py               44      0   100%
src/extract_transform_platform/services/codegen/prompt_generator.py        115      2    98%   328, 336
src/extract_transform_platform/services/project_manager.py                 170      8    95%   580-587
src/extract_transform_platform/sources/__init__.py                           1      1     0%   16
src/extract_transform_platform/templates/__init__.py                         1      1     0%   28
src/extract_transform_platform/utils/__init__.py                             2      0   100%
src/extract_transform_platform/utils/rate_limiter.py                        34      3    91%   73, 88, 105
------------------------------------------------------------------------------------------------------
TOTAL                                                                     9793   5870    40%
Coverage HTML written to dir htmlcov
FAIL Required test coverage of 80% not reached. Total coverage: 40.06%
=========================== short test summary info ============================
FAILED tests/integration/test_analyze_project_threshold.py::TestEdgeCases::test_all_patterns_excluded_still_generates_code
FAILED tests/integration/test_batch1_datasources.py::TestFileDataSourceMigration::test_edgar_wrapper_import_with_warning
FAILED tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_pattern_types_complete
FAILED tests/integration/test_batch2_schema_services.py::TestPlatformImports::test_field_types_complete
FAILED tests/integration/test_batch2_schema_services.py::TestBackwardCompatibility::test_deprecation_warnings_raised
FAILED tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_simple_field_rename_flow
FAILED tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_type_conversion_flow
FAILED tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_concatenation_flow
FAILED tests/integration/test_batch2_schema_services.py::TestEndToEndPatternDetection::test_confidence_scores_valid
FAILED tests/integration/test_batch2_schema_services.py::TestSchemaAnalysis::test_schema_inference_from_examples
FAILED tests/integration/test_batch2_schema_services.py::TestSchemaAnalysis::test_schema_comparison
FAILED tests/integration/test_batch2_schema_services.py::TestComplexPatterns::test_nested_structure_pattern
FAILED tests/integration/test_batch2_schema_services.py::TestComplexPatterns::test_array_handling
FAILED tests/integration/test_batch2_schema_services.py::TestEdgeCases::test_inconsistent_schemas
FAILED tests/integration/test_batch2_schema_services.py::TestEdgeCases::test_null_values
FAILED tests/integration/test_batch2_schema_services.py::test_batch2_complete_integration
FAILED tests/integration/test_code_generation.py::test_generate_weather_extractor
FAILED tests/integration/test_code_generation.py::test_generated_code_is_valid_python
FAILED tests/integration/test_code_generation.py::test_generated_code_has_type_hints
FAILED tests/integration/test_code_generation.py::test_generated_code_has_docstrings
FAILED tests/integration/test_code_generation.py::test_generated_tests_reference_examples
FAILED tests/integration/test_code_generation.py::test_files_written_to_disk
FAILED tests/integration/test_code_generation.py::test_minimal_examples_still_generates
FAILED tests/integration/test_code_generation.py::test_generation_performance
FAILED tests/integration/test_code_generation.py::test_iterative_refinement_on_validation_failure
FAILED tests/integration/test_code_generation.py::test_max_retries_exceeded
FAILED tests/integration/test_code_generation.py::test_validation_disabled_no_retry
FAILED tests/integration/test_weather_api_e2e.py::TestWeatherAPILifecycle::test_weather_api_cli_commands
FAILED tests/integration/test_weather_api_e2e.py::TestWeatherAPICodeGeneration::test_weather_api_generation_with_missing_examples
FAILED tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_pm_mode_planning
FAILED tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_plan_contains_extractor_class
FAILED tests/integration/test_weather_api_generation.py::TestPMModePlanning::test_plan_includes_dependencies
FAILED tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_coder_mode_generation
FAILED tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_extractor_has_class
FAILED tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_code_implements_interface
FAILED tests/integration/test_weather_api_generation.py::TestCoderModeGeneration::test_generated_tests_exist
FAILED tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_constraint_validation
FAILED tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_code_has_type_hints
FAILED tests/integration/test_weather_api_generation.py::TestConstraintValidation::test_code_has_docstrings
FAILED tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_end_to_end_generation
FAILED tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_generated_files_exist
FAILED tests/integration/test_weather_api_generation.py::TestEndToEndGeneration::test_generated_code_quality
FAILED tests/test_50_companies.py::test_50_companies - Failed: async def func...
FAILED tests/test_centralized_openrouter.py::test_openrouter_service - Failed...
FAILED tests/test_centralized_openrouter.py::test_llm_service_integration - F...
FAILED tests/test_centralized_openrouter.py::test_model_independence - Failed...
FAILED tests/test_cli_chatbot.py::test_cli_chatbot - Failed: async def functi...
FAILED tests/test_cli_with_fallback.py::test_cli_with_fallback - Failed: asyn...
FAILED tests/test_compaction_metrics.py::test_compaction_metrics - Failed: as...
FAILED tests/test_compaction_metrics.py::test_multiple_compactions - Failed: ...
FAILED tests/test_context_preservation.py::test_early_context_preserved - Fai...
FAILED tests/test_context_preservation.py::test_summary_accumulation - Failed...
FAILED tests/test_context_preservation.py::test_named_entity_recall - Failed:...
FAILED tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_excel_data_source_integration
FAILED tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_data_quality
FAILED tests/test_employee_roster_poc.py::TestEmployeeRosterPOC::test_example_matches_source_data
FAILED tests/test_enhanced_validation.py::test_validation_with_sample_data - ...
FAILED tests/test_error_handling.py::test_no_tiktoken_fallback - Failed: asyn...
FAILED tests/test_error_handling.py::test_llm_failure_handling - Failed: asyn...
FAILED tests/test_error_handling.py::test_empty_conversation_compaction - Fai...
FAILED tests/test_error_handling.py::test_malformed_summary_response - Failed...
FAILED tests/test_error_handling.py::test_very_long_exchange - Failed: async ...
FAILED tests/test_error_handling.py::test_rapid_compaction_cycles - Failed: a...
FAILED tests/test_error_handling.py::test_edge_case_token_counts - Failed: as...
FAILED tests/test_error_handling.py::test_concurrent_access - Failed: async d...
FAILED tests/test_fmp_integration.py::test_fmp_api_integration - Failed: asyn...
FAILED tests/test_grok_qa_capabilities.py::test_grok_qa_capabilities - Failed...
FAILED tests/test_llm_direct.py::test_llm_direct - Failed: async def function...
FAILED tests/test_llm_extraction.py::test_llm_extraction - Failed: async def ...
FAILED tests/test_performance.py::test_compaction_performance - Failed: async...
FAILED tests/test_performance.py::test_token_counting_performance - Failed: a...
FAILED tests/test_performance.py::test_memory_overhead - Failed: async def fu...
FAILED tests/test_performance.py::test_large_conversation_performance - Faile...
FAILED tests/test_performance.py::test_summarizer_performance - Failed: async...
FAILED tests/test_proxy_extraction.py::test_proxy_extraction - Failed: async ...
FAILED tests/test_reusable_library.py::test_reusable_library - Failed: async ...
FAILED tests/test_self_improving_pattern.py::test_self_improving_pattern - Fa...
FAILED tests/test_subprocess_monitoring.py::test_subprocess_monitoring - Fail...
FAILED tests/test_web_search_integration.py::test_llm_service_web_search - Fa...
FAILED tests/test_web_search_integration.py::test_supervisor_web_search - Fai...
FAILED tests/test_web_search_integration.py::test_engineer_web_search - Faile...
FAILED tests/test_web_search_integration.py::test_controller_web_search - Fai...
FAILED tests/test_xbrl_executive_compensation.py::test_edgartools_installation
FAILED tests/test_xbrl_executive_compensation.py::test_xbrl_proxy_extraction
FAILED tests/test_xbrl_executive_compensation.py::test_enhanced_edgar_extraction
FAILED tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_all_services
FAILED tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_openrouter_only
FAILED tests/unit/cli/test_setup_command.py::TestSetupTestCommand::test_cli_command_failure
FAILED tests/unit/test_data_sources.py::TestJinaDataSource::test_jina_initialization_free_tier
ERROR tests/integration/test_analyze_project_threshold.py::TestConfidenceThresholdCLIFlag::test_generate_with_threshold_flag
ERROR tests/integration/test_analyze_project_threshold.py::TestConfidenceThresholdCLIFlag::test_generate_without_threshold_flag_skips_prompt
ERROR tests/integration/test_analyze_project_threshold.py::TestEdgeCases::test_no_patterns_detected_skips_threshold_prompt
ERROR tests/integration/test_analyze_project_threshold.py::TestBackwardCompatibility::test_generate_without_threshold_still_works
= 89 failed, 824 passed, 59 skipped, 63 warnings, 4 errors in 385.03s (0:06:25) =
